import{J as c,K as g,a as v}from"./index.51562f92.js";import{A as i}from"./index.ecbb0c88.js";const d={async create(a){return(await c.post(`${i}/inventory`,a)).data},async getById(a){return(await c.get(`${i}/inventory/${a}`)).data},async updateById(a,r){return(await c.put(`${i}/inventory/${a}`,r)).data},async delete(a){return(await c.delete(`${i}/inventory/${a}`)).data},async list(a){return(await c.get(`${i}/inventory`,{params:a})).data},async adjustQuantity(a,r,t){return(await c.patch(`${i}/inventory/${a}/adjust-quantity`,{quantityChange:r,note:t})).data}},F=g("inventory",()=>{const a=v({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),r=v(null),t=v(!1),l=v(null),y=v(!1);return{items:a,item:r,isLoading:t,error:l,isLoaded:y,fetchItems:async(s={},o=!1)=>{var e;if(l.value=null,!(!o&&y.value))try{t.value=!0;const n=await d.list(s);Object.assign(a.value,{total:n.total||0,totalPages:n.totalPages||1,currentPage:s.page||1,pageSize:s.limit||10,data:n.data||[]}),y.value=!0}catch(n){l.value=((e=n==null?void 0:n.response)==null?void 0:e.message)||"Failed to fetch inventory records"}finally{t.value=!1}},fetchItemById:async s=>{var o;l.value=null;try{t.value=!0;const e=await d.getById(s);r.value=e}catch(e){l.value=((o=e==null?void 0:e.response)==null?void 0:o.message)||"Failed to fetch inventory record"}finally{t.value=!1}},createItem:async s=>{var o;l.value=null;try{t.value=!0;const e=await d.create(s);a.value.data.push(e),a.value.total+=1}catch(e){l.value=((o=e==null?void 0:e.response)==null?void 0:o.message)||"Failed to create inventory record"}finally{t.value=!1}},updateItem:async(s,o)=>{var e;l.value=null;try{t.value=!0;const n=await d.updateById(s,o),u=a.value.data.findIndex(p=>p.id===s);u!==-1&&(a.value.data[u]=n)}catch(n){l.value=((e=n==null?void 0:n.response)==null?void 0:e.message)||"Failed to update inventory record"}finally{t.value=!1}},deleteItem:async s=>{var o;l.value=null;try{t.value=!0,await d.delete(s),a.value.data=a.value.data.filter(e=>e.id!==s),a.value.total-=1}catch(e){l.value=((o=e==null?void 0:e.response)==null?void 0:o.message)||"Failed to delete inventory record"}finally{t.value=!1}},adjustItemQuantity:async(s,o,e)=>{var n;l.value=null;try{t.value=!0;const u=await d.adjustQuantity(s,o,e),p=a.value.data.findIndex(f=>f.id===s);p!==-1&&(a.value.data[p]=u)}catch(u){l.value=((n=u==null?void 0:u.response)==null?void 0:n.message)||"Failed to adjust inventory quantity"}finally{t.value=!1}},resetStore:()=>{a.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,t.value=!1,l.value=null,y.value=!1}}});export{F as u};
