import{a as p,s as M,b as f,l as C,f as u,e as b,i as e,B as i,C as n,m as h,F as T,h as d,c as x,v as $,t as I,S as k}from"./index.81ed66ed.js";import{_ as j}from"./LayoutAuthenticatedX.a0217d4b.js";import{_ as z}from"./SectionMain.ff7c0a76.js";import{u as Q}from"./customer.5d68ee00.js";import{_ as Y}from"./NotificationBar.62c87214.js";import{B as q}from"./BaseTable.aa93a529.js";import{_ as G}from"./CardBox.d4dece43.js";import{_ as H}from"./SectionTitleLineWithButton.9b4305a6.js";import{_ as N}from"./BaseButton.4cf3599a.js";import{p as J,c as K,u as O,v as R}from"./mdi.aa269c9f.js";import"./darkMode.4d354904.js";import"./BaseIcon.f7bbc3f6.js";import"./FormControl.7fdae42f.js";import"./FooterBar.223d3b14.js";import"./logo.c6f18b48.js";import"./BaseLevel.f8579f88.js";import"./TableCheckboxCell.5bd18b8c.js";import"./BaseButtons.e89c9a47.js";import"./_plugin-vue_export-helper.c27b6911.js";const W={class:"flex items-center gap-2"},X={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Z={class:"bg-white p-6 rounded shadow-lg w-96"},ee=e("h2",{class:"text-xl mb-4"},"Add Customer",-1),te={class:"mb-4"},se=e("label",{class:"block mb-1",for:"customerFirstName"},"First Name",-1),ae={class:"mb-4"},le=e("label",{class:"block mb-1",for:"customerLastName"},"Last Name",-1),oe={class:"mb-4"},re=e("label",{class:"block mb-1",for:"customerEmail"},"Email",-1),ie={class:"mb-4"},ne=e("label",{class:"block mb-1",for:"customerPhone"},"Phone",-1),de={class:"mb-4"},ue=e("label",{class:"block mb-1",for:"customerAddress"},"Address",-1),me={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ce={class:"bg-white p-6 rounded shadow-lg w-96"},pe=e("h2",{class:"text-xl mb-4"},"Edit Customer",-1),fe={class:"mb-4"},be=e("label",{class:"block mb-1",for:"editCustomerFirstName"},"First Name",-1),_e={class:"mb-4"},ve=e("label",{class:"block mb-1",for:"editCustomerLastName"},"Last Name",-1),he={class:"mb-4"},Ce=e("label",{class:"block mb-1",for:"editCustomerEmail"},"Email",-1),ye={class:"mb-4"},we=e("label",{class:"block mb-1",for:"editCustomerPhone"},"Phone",-1),ge={class:"mb-4"},xe=e("label",{class:"block mb-1",for:"editCustomerAddress"},"Address",-1),qe={__name:"CustomersView",setup(ke){const _=p(!1),r=p({first_name:"",last_name:"",email:"",phone:"",address:""}),v=p(!1),a=p({id:null,first_name:"",last_name:"",email:"",phone:"",address:""}),o=Q(),m=p([]);async function c(l={},t=!1){await o.fetchItems(l,t)}c({page:1,limit:10});const y=M(()=>{var l,t,s,w,g;return{total:((l=o.items)==null?void 0:l.total)||0,totalPages:((t=o.items)==null?void 0:t.totalPages)||1,currentPage:((s=o.items)==null?void 0:s.currentPage)||1,pageSize:((w=o.items)==null?void 0:w.pageSize)||5,data:((g=o.items)==null?void 0:g.data)||[]}}),V=[{key:"first_name",label:"First Name",sortable:!0,filterable:!0},{key:"last_name",label:"Last Name",sortable:!0,filterable:!0},{key:"email",label:"Email",sortable:!0,filterable:!0},{key:"phone",label:"Phone",sortable:!0,filterable:!0}],E=async l=>{await c(l,!0)},B=l=>{m.value=l},P=l=>{a.value={id:l.id,first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone,address:l.address},v.value=!0},S=()=>{r.value={first_name:"",last_name:"",email:"",phone:"",address:""},_.value=!0};async function F(){await o.createItem(r.value),o.error||(_.value=!1,await c({page:1,limit:10},!0))}async function U(){await o.updateItem(a.value.id,{first_name:a.value.first_name,last_name:a.value.last_name,email:a.value.email,phone:a.value.phone,address:a.value.address}),o.error||(v.value=!1,await c({page:1,limit:10},!0))}async function A(){if(m.value.length===0)return;if((await k.fire({title:"Are you sure?",text:"You wonâ€™t be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const t of m.value)if(await o.deleteItem(t),o.error)break;o.error||(m.value=[],await c({page:1,limit:10},!0),k.fire("Deleted!","The customers have been deleted.","success"))}}const D=()=>{_.value=!1},L=()=>{v.value=!1};return(l,t)=>(f(),C(T,null,[u(j,null,{default:b(()=>[u(z,null,{default:b(()=>[d(o).error?(f(),x(Y,{key:0,icon:d(J),color:"danger"},{default:b(()=>[$(I(d(o).error),1)]),_:1},8,["icon"])):h("",!0),u(H,{icon:d(K),title:"Customers",main:""},{default:b(()=>[e("div",W,[u(N,{icon:d(O),color:"primary",label:"New Customer",onClick:S},null,8,["icon"]),m.value.length?(f(),x(N,{key:0,icon:d(R),color:"danger",label:"Delete",onClick:A},null,8,["icon"])):h("",!0)])]),_:1},8,["icon"]),u(G,{class:"mb-6"},{default:b(()=>[u(q,{columns:V,data:y.value,total:y.value.total,loading:d(o).isLoading,checkable:"",onQueryChange:E,onSelected:B,onEdit:P},null,8,["data","total","loading"])]),_:1})]),_:1})]),_:1}),_.value?(f(),C("div",X,[e("div",Z,[ee,e("div",te,[se,i(e("input",{id:"customerFirstName","onUpdate:modelValue":t[0]||(t[0]=s=>r.value.first_name=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,r.value.first_name]])]),e("div",ae,[le,i(e("input",{id:"customerLastName","onUpdate:modelValue":t[1]||(t[1]=s=>r.value.last_name=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,r.value.last_name]])]),e("div",oe,[re,i(e("input",{id:"customerEmail","onUpdate:modelValue":t[2]||(t[2]=s=>r.value.email=s),type:"email",class:"w-full border p-2 rounded"},null,512),[[n,r.value.email]])]),e("div",ie,[ne,i(e("input",{id:"customerPhone","onUpdate:modelValue":t[3]||(t[3]=s=>r.value.phone=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,r.value.phone]]),e("div",de,[ue,i(e("input",{id:"customerAddress","onUpdate:modelValue":t[4]||(t[4]=s=>r.value.address=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,r.value.address]])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:D}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:F}," Save ")])])])])):h("",!0),v.value?(f(),C("div",me,[e("div",ce,[pe,e("div",fe,[be,i(e("input",{id:"editCustomerFirstName","onUpdate:modelValue":t[5]||(t[5]=s=>a.value.first_name=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,a.value.first_name]])]),e("div",_e,[ve,i(e("input",{id:"editCustomerLastName","onUpdate:modelValue":t[6]||(t[6]=s=>a.value.last_name=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,a.value.last_name]])]),e("div",he,[Ce,i(e("input",{id:"editCustomerEmail","onUpdate:modelValue":t[7]||(t[7]=s=>a.value.email=s),type:"email",class:"w-full border p-2 rounded"},null,512),[[n,a.value.email]])]),e("div",ye,[we,i(e("input",{id:"editCustomerPhone","onUpdate:modelValue":t[8]||(t[8]=s=>a.value.phone=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,a.value.phone]])]),e("div",ge,[xe,i(e("input",{id:"editCustomerAddress","onUpdate:modelValue":t[9]||(t[9]=s=>a.value.address=s),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,a.value.address]])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:L}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:U}," Update ")])])])):h("",!0)],64))}};export{qe as default};
