import{a as m,s as j,b as p,l as y,f as c,e as f,i as e,B as r,C as v,M as w,m as _,F,h as i,c as B,v as I,t as L,S as k}from"./index.a2c9f28c.js";import{_ as z}from"./LayoutAuthenticatedX.d58fd7d8.js";import{_ as Q}from"./SectionMain.8435c1f0.js";import{u as Y}from"./branch.31058824.js";import{_ as q}from"./NotificationBar.caa84e93.js";import{B as G}from"./BaseTable.a063d648.js";import{_ as H}from"./CardBox.25a3dc7a.js";import{_ as J}from"./SectionTitleLineWithButton.39476921.js";import{_ as C}from"./BaseButton.b8e12a74.js";import{p as K,c as O,u as R,v as W}from"./mdi.aa269c9f.js";import"./darkMode.b88882a1.js";import"./BaseIcon.ad3a4017.js";import"./FormControl.2759acc3.js";import"./FooterBar.948c11c8.js";import"./logo.c6f18b48.js";import"./BaseLevel.e0eed931.js";import"./TableCheckboxCell.8ab5003b.js";import"./BaseButtons.e7208c74.js";import"./_plugin-vue_export-helper.c27b6911.js";const X={class:"flex items-center gap-2"},Z={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ee={class:"bg-white p-6 rounded shadow-lg w-[500px]"},te=e("h2",{class:"text-xl mb-4"},"Add Branch",-1),ae={class:"space-y-4"},le=e("label",{class:"block mb-1"},"Name",-1),oe=e("label",{class:"block mb-1"},"Location",-1),ne={class:"flex items-center"},se=e("label",null,"Active",-1),ie={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ce={class:"bg-white p-6 rounded shadow-lg w-[500px]"},re=e("h2",{class:"text-xl mb-4"},"Edit Branch",-1),de={class:"space-y-4"},ue=e("label",{class:"block mb-1"},"Name",-1),me=e("label",{class:"block mb-1"},"Location",-1),pe={class:"flex items-center"},fe=e("label",null,"Active",-1),$e={__name:"BranchesView",setup(be){const b=m(!1),h=m(!1),s=m({name:"",location:"",is_active:!0}),n=m({id:null,name:"",location:"",is_active:!0}),l=Y(),d=m([]);async function u(a={},t=!1){await l.fetchAll(a,t)}u({page:1,limit:5});const S=j(()=>{var a,t,o,g,x;return{total:((a=l.branches)==null?void 0:a.total)||0,totalPages:((t=l.branches)==null?void 0:t.totalPages)||1,currentPage:((o=l.branches)==null?void 0:o.currentPage)||1,pageSize:((g=l.branches)==null?void 0:g.pageSize)||5,data:((x=l.branches)==null?void 0:x.data)||[]}}),N=[{key:"name",label:"Name",sortable:!0,filterable:!0},{key:"location",label:"Location",sortable:!0,filterable:!0},{key:"is_active",label:"Status",sortable:!0,formatter:a=>a?"Active":"Inactive"}],V=async a=>{await u(a,!0)},D=a=>{d.value=a},M=a=>{n.value={id:a.id,name:a.name,location:a.location,is_active:a.is_active},h.value=!0},A=()=>{s.value={name:"",location:"",is_active:!0},b.value=!0};async function T(){await l.create(s.value),l.error||(b.value=!1,await u({page:1,limit:5},!0))}async function U(){await l.updateById(n.value.id,n.value),l.error||(h.value=!1,await u({page:1,limit:5},!0))}async function E(){if(d.value.length===0)return;if((await k.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const t of d.value)if(await l.deleteById(t),l.error)break;l.error||(d.value=[],await u({page:1,limit:5},!0),k.fire("Deleted!","The branches have been deleted.","success"))}}const $=()=>{b.value=!1},P=()=>{h.value=!1};return(a,t)=>(p(),y(F,null,[c(z,null,{default:f(()=>[c(Q,null,{default:f(()=>[i(l).error?(p(),B(q,{key:0,icon:i(K),color:"danger"},{default:f(()=>[I(L(i(l).error),1)]),_:1},8,["icon"])):_("",!0),c(J,{icon:i(O),title:"Branches",main:""},{default:f(()=>[e("div",X,[c(C,{icon:i(R),color:"primary",label:"New Branch",onClick:A},null,8,["icon"]),d.value.length?(p(),B(C,{key:0,icon:i(W),color:"danger",label:"Delete",onClick:E},null,8,["icon"])):_("",!0)])]),_:1},8,["icon"]),c(H,{class:"mb-6"},{default:f(()=>[c(G,{columns:N,data:S.value,loading:i(l).isLoading,checkable:"",onQueryChange:V,onSelected:D,onEdit:M},null,8,["data","loading"])]),_:1})]),_:1})]),_:1}),b.value?(p(),y("div",Z,[e("div",ee,[te,e("div",ae,[e("div",null,[le,r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.name=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[v,s.value.name]])]),e("div",null,[oe,r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.location=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[v,s.value.location]])]),e("div",ne,[r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.is_active=o),type:"checkbox",class:"mr-2"},null,512),[[w,s.value.is_active]]),se])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:$},"Cancel"),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:T}," Save ")])])])):_("",!0),h.value?(p(),y("div",ie,[e("div",ce,[re,e("div",de,[e("div",null,[ue,r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>n.value.name=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[v,n.value.name]])]),e("div",null,[me,r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>n.value.location=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[v,n.value.location]])]),e("div",pe,[r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>n.value.is_active=o),type:"checkbox",class:"mr-2"},null,512),[[w,n.value.is_active]]),fe])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:P},"Cancel"),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:U}," Update ")])])])):_("",!0)],64))}};export{$e as default};
