import{a as d,s as I,b as u,c as h,e as m,f as p,h as s,v as P,t as U,m as _,i as e,l as x,B as v,C as g,S as y}from"./index.51562f92.js";import{_ as A}from"./LayoutAuthenticatedX.6bd79e57.js";import{_ as z}from"./SectionMain.02def4a3.js";import{u as F}from"./jobTitleStore.e2617fc9.js";import{_ as Q}from"./NotificationBar.041f3c84.js";import{B as L}from"./BaseTable.7226d914.js";import{_ as Y}from"./CardBox.fbcc1594.js";import{_ as q}from"./SectionTitleLineWithButton.887bdad5.js";import{_ as k}from"./BaseButton.ef1be83b.js";import{p as G,c as H,u as K,v as O}from"./mdi.50c7bbe5.js";import"./darkMode.dac3c9ce.js";import"./BaseIcon.dfc7d1db.js";import"./FormControl.1af19c3b.js";import"./FooterBar.d9b5343e.js";import"./logo.c6f18b48.js";import"./BaseLevel.135e0538.js";import"./index.e54bd547.js";import"./TableCheckboxCell.cdb4ab34.js";import"./BaseButtons.a7fb044c.js";import"./_plugin-vue_export-helper.c27b6911.js";const R={class:"flex items-center gap-2"},W={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},X={class:"bg-white p-6 rounded shadow-lg w-[600px]"},Z=e("h2",{class:"text-xl mb-4"},"Add Job Title",-1),ee={class:"grid grid-cols-1 gap-4"},te=e("label",{class:"block mb-1"},"Title",-1),le=e("label",{class:"block mb-1"},"Description",-1),oe={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ie={class:"bg-white p-6 rounded shadow-lg w-[600px]"},ae=e("h2",{class:"text-xl mb-4"},"Edit Job Title",-1),se={class:"grid grid-cols-1 gap-4"},ne=e("label",{class:"block mb-1"},"Title",-1),re=e("label",{class:"block mb-1"},"Description",-1),je={__name:"JobTitlesView",setup(ce){const b=d(!1),f=d(!1),n=d({title:"",description:""}),a=d({id:null,title:"",description:""}),t=F(),r=d([]);async function c(o={},l=!1){await t.fetchItems(o,l)}c({page:1,limit:5});const C=I(()=>{var o,l,i,w,T;return{total:((o=t.items)==null?void 0:o.total)||0,totalPages:((l=t.items)==null?void 0:l.totalPages)||1,currentPage:((i=t.items)==null?void 0:i.currentPage)||1,pageSize:((w=t.items)==null?void 0:w.pageSize)||5,data:((T=t.items)==null?void 0:T.data)||[]}}),J=[{key:"title",label:"Title",sortable:!0,filterable:!0},{key:"description",label:"Description",sortable:!0,filterable:!0}],B=async o=>{await c(o,!0)},S=o=>{r.value=o},D=o=>{a.value={id:o.id,title:o.title,description:o.description},f.value=!0},j=()=>{n.value={title:"",description:""},b.value=!0};async function N(){await t.createItem(n.value),t.error||(b.value=!1,await c({page:1,limit:5},!0))}async function V(){await t.updateItem(a.value.id,a.value),t.error||(f.value=!1,await c({page:1,limit:5},!0))}async function E(){if(r.value.length===0)return;if((await y.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const l of r.value)if(await t.deleteItem(l),t.error)break;t.error||(r.value=[],await c({page:1,limit:5},!0),y.fire("Deleted!","The job titles have been deleted.","success"))}}const M=()=>{b.value=!1},$=()=>{f.value=!1};return(o,l)=>(u(),h(A,null,{default:m(()=>[p(z,null,{default:m(()=>[s(t).error?(u(),h(Q,{key:0,icon:s(G),color:"danger"},{default:m(()=>[P(U(s(t).error),1)]),_:1},8,["icon"])):_("",!0),p(q,{icon:s(H),title:"Job Titles",main:""},{default:m(()=>[e("div",R,[p(k,{icon:s(K),color:"primary",label:"New Job Title",onClick:j},null,8,["icon"]),r.value.length?(u(),h(k,{key:0,icon:s(O),color:"danger",label:"Delete",onClick:E},null,8,["icon"])):_("",!0)])]),_:1},8,["icon"]),p(Y,{class:"mb-6"},{default:m(()=>[p(L,{columns:J,data:C.value,loading:s(t).isLoading,checkable:"",onQueryChange:B,onSelected:S,onEdit:D},null,8,["data","loading"])]),_:1})]),_:1}),b.value?(u(),x("div",W,[e("div",X,[Z,e("div",ee,[e("div",null,[te,v(e("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>n.value.title=i),type:"text",class:"w-full border p-2 rounded"},null,512),[[g,n.value.title]])]),e("div",null,[le,v(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=i=>n.value.description=i),class:"w-full border p-2 rounded"},null,512),[[g,n.value.description]])])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:M}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:N}," Save ")])])])):_("",!0),f.value?(u(),x("div",oe,[e("div",ie,[ae,e("div",se,[e("div",null,[ne,v(e("input",{"onUpdate:modelValue":l[2]||(l[2]=i=>a.value.title=i),type:"text",class:"w-full border p-2 rounded"},null,512),[[g,a.value.title]])]),e("div",null,[re,v(e("textarea",{"onUpdate:modelValue":l[3]||(l[3]=i=>a.value.description=i),class:"w-full border p-2 rounded"},null,512),[[g,a.value.description]])])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:$}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:V}," Update ")])])])):_("",!0)]),_:1}))}};export{je as default};
