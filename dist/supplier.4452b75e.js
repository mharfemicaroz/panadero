import{J as o,K as y,a as p}from"./index.dc23916b.js";import{A as c}from"./index.73022cfe.js";const i={async list(a){return(await o.get(`${c}/suppliers`,{params:a})).data},async create(a){return(await o.post(`${c}/suppliers`,a)).data},async getById(a){return(await o.get(`${c}/suppliers/${a}`)).data},async updateById(a,r){return(await o.put(`${c}/suppliers/${a}`,r)).data},async delete(a){return(await o.delete(`${c}/suppliers/${a}`)).data}},P=y("supplier",()=>{const a=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),r=p(null),t=p(!1),n=p(null),d=p(!1);return{items:a,item:r,isLoading:t,error:n,isLoaded:d,fetchItems:async(s={},u=!1)=>{var e;if(n.value=null,!(!u&&d.value))try{t.value=!0;const l=await i.list(s);Object.assign(a.value,{total:l.total||0,totalPages:l.totalPages||1,currentPage:s.page||1,pageSize:s.limit||10,data:l.data||[]}),d.value=!0}catch(l){n.value=((e=l==null?void 0:l.response)==null?void 0:e.message)||"Failed to fetch suppliers"}finally{t.value=!1}},fetchItemById:async s=>{var u;n.value=null;try{t.value=!0;const e=await i.getById(s);r.value=e}catch(e){n.value=((u=e==null?void 0:e.response)==null?void 0:u.message)||"Failed to fetch supplier"}finally{t.value=!1}},createItem:async s=>{var u;n.value=null;try{t.value=!0;const e=await i.create(s);a.value.data.push(e),a.value.total+=1}catch(e){n.value=((u=e==null?void 0:e.response)==null?void 0:u.message)||"Failed to create supplier"}finally{t.value=!1}},updateItem:async(s,u)=>{var e;n.value=null;try{t.value=!0;const l=await i.updateById(s,u),v=a.value.data.findIndex(f=>f.id===s);v!==-1&&(a.value.data[v]=l)}catch(l){n.value=((e=l==null?void 0:l.response)==null?void 0:e.message)||"Failed to update supplier"}finally{t.value=!1}},deleteItem:async s=>{var u;n.value=null;try{t.value=!0,await i.delete(s),a.value.data=a.value.data.filter(e=>e.id!==s),a.value.total-=1}catch(e){n.value=((u=e==null?void 0:e.response)==null?void 0:u.message)||"Failed to delete supplier"}finally{t.value=!1}},resetStore:()=>{a.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,d.value=!1,t.value=!1,n.value=null}}});export{P as u};
