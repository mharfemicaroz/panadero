import{_ as D}from"./LayoutAuthenticatedX.d58fd7d8.js";import{_ as $}from"./SectionMain.8435c1f0.js";import{_ as S}from"./NotificationBar.caa84e93.js";import{B as v}from"./BaseTable.a063d648.js";import{_ as w}from"./CardBox.25a3dc7a.js";import{_ as x}from"./SectionTitleLineWithButton.39476921.js";import{_ as V}from"./BaseButton.b8e12a74.js";import{V as k}from"./main.be0db63c.js";import{u as T}from"./attendanceStore.3b393978.js";import{aa as C,a as F,s as B,q as M,b as u,c as p,e as m,f as n,h as c,v as N,t as P,m as A,i}from"./index.a2c9f28c.js";import"./mdi.aa269c9f.js";import"./darkMode.b88882a1.js";import"./BaseIcon.ad3a4017.js";import"./FormControl.2759acc3.js";import"./FooterBar.948c11c8.js";import"./logo.c6f18b48.js";import"./BaseLevel.e0eed931.js";import"./TableCheckboxCell.8ab5003b.js";import"./BaseButtons.e7208c74.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./index.0363223d.js";const E={class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded shadow-sm"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I=i("label",{class:"block text-sm font-medium text-gray-700"},"Select Date Range",-1),R={class:"mt-4 flex justify-end"},it={__name:"TotalHoursWorkView",setup(q){const{appContext:_}=C();_.config.globalProperties.API_URL;const l=T(),r=F([new Date,new Date]);function f(a){const t=new Date(a),e=t.getFullYear(),o=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0");return`${e}-${o}-${s}T00:00:00`}function g(a){const t=new Date(a),e=t.getFullYear(),o=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0");return`${e}-${o}-${s}T23:59:59`}const d=async(a={})=>{let t="",e="";r.value&&r.value.length===2&&(t=f(r.value[0]),e=g(r.value[1])),await l.fetchItems({"filters[start_date]":t,"filters[end_date]":e,page:1,limit:100},!0)},y=B(()=>{const a={};l.items.data.forEach(e=>{const o=e.employee?`${e.employee.first_name} ${e.employee.last_name}`:`Employee ${e.employee_id}`,s=parseFloat(e.total_hours)||0;a[o]?a[o]+=s:a[o]=s});const t=[];for(const e in a)t.push({employee:e,total_hours:a[e].toFixed(2)});return{total:t.length,totalPages:1,currentPage:1,pageSize:t.length,data:t}}),h=[{key:"employee",label:"Employee",sortable:!0},{key:"total_hours",label:"Total Hours",sortable:!0}],b=()=>{d()};return M(()=>{d()}),(a,t)=>(u(),p(D,null,{default:m(()=>[n($,null,{default:m(()=>[c(l).error?(u(),p(S,{key:0,color:"danger"},{default:m(()=>[N(P(c(l).error),1)]),_:1})):A("",!0),n(x,{title:"Total Hours",main:""}),i("div",E,[i("div",H,[i("div",null,[I,n(c(k),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),range:"","multi-calendars":"",format:"yyyy-MM-dd","input-class":"mt-1 block w-full rounded border-gray-300 shadow-sm"},null,8,["modelValue"])])]),i("div",R,[n(V,{label:"Filter",color:"blue",class:"px-4 py-2",onClick:b})])]),n(w,{class:"mb-6"},{default:m(()=>[n(v,{columns:h,data:y.value,loading:c(l).isLoading,"hide-actions":!0},null,8,["data","loading"])]),_:1})]),_:1})]),_:1}))}};export{it as default};
