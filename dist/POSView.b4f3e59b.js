import{z as zr,b as d,l as h,i as a,m as w,F as G,x as X,t as b,a as x,w as Ee,A as Fn,s as C,B as T,C as I,g as yt,f as Q,h as P,v as ee,q as Un,n as ie,c as K,e as Je,T as On,D as $t,E as Ot,r as qn,G as Hr,H as Xr,d as Qr,u as Wr,I as Jr,S as k}from"./index.a2c9f28c.js";import{u as Yr}from"./item.aee657f4.js";import{_ as we}from"./BaseIcon.ad3a4017.js";import{j as Zr,o as Kr,p as eo,q as to,r as no,s as ro,t as oo}from"./mdi.aa269c9f.js";import{_ as Ye}from"./_plugin-vue_export-helper.c27b6911.js";import{u as Vn}from"./customer.0aba63c8.js";import{u as zn}from"./sale.19acb1de.js";import{B as ao}from"./BaseTable.a063d648.js";import{_ as io}from"./NotificationBar.caa84e93.js";import{u as uo}from"./category.bf6a5d80.js";import{u as lo,a as co}from"./cashRegister.f178f2bb.js";import"./index.77c7a69c.js";import"./TableCheckboxCell.8ab5003b.js";import"./BaseButton.b8e12a74.js";import"./BaseButtons.e7208c74.js";import"./BaseLevel.e0eed931.js";var St={},Ze={},L={};Object.defineProperty(L,"__esModule",{value:!0});function so(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var fo=function t(e,r){so(this,t),this.data=e,this.text=r.text||e,this.options=r};L.default=fo;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.CODE39=void 0;var ho=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),vo=L,mo=_o(vo);function _o(t){return t&&t.__esModule?t:{default:t}}function po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function go(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yo=function(t){bo(e,t);function e(r,n){return po(this,e),r=r.toUpperCase(),n.mod43&&(r+=Eo($o(r))),go(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return ho(e,[{key:"encode",value:function(){for(var n=vt("*"),o=0;o<this.data.length;o++)n+=vt(this.data[o])+"0";return n+=vt("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(mo.default),Hn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],xo=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function vt(t){return wo(Xn(t))}function wo(t){return xo[t].toString(2)}function Eo(t){return Hn[t]}function Xn(t){return Hn.indexOf(t)}function $o(t){for(var e=0,r=0;r<t.length;r++)e+=Xn(t[r]);return e=e%43,e}Ze.CODE39=yo;var J={},Ct={},Oe={},S={};Object.defineProperty(S,"__esModule",{value:!0});var De;function mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qn=S.SET_A=0,Wn=S.SET_B=1,Jn=S.SET_C=2;S.SHIFT=98;var Oo=S.START_A=103,So=S.START_B=104,Co=S.START_C=105;S.MODULO=103;S.STOP=106;S.FNC1=207;S.SET_BY_CODE=(De={},mt(De,Oo,Qn),mt(De,So,Wn),mt(De,Co,Jn),De);S.SWAP={101:Qn,100:Wn,99:Jn};S.A_START_CHAR=String.fromCharCode(208);S.B_START_CHAR=String.fromCharCode(209);S.C_START_CHAR=String.fromCharCode(210);S.A_CHARS="[\0-_È-Ï]";S.B_CHARS="[ -È-Ï]";S.C_CHARS="(Ï*[0-9]{2}Ï*)";S.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Oe,"__esModule",{value:!0});var ko=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Po=L,Ao=To(Po),j=S;function To(t){return t&&t.__esModule?t:{default:t}}function Io(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Mo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Do=function(t){Mo(e,t);function e(r,n){Io(this,e);var o=Ro(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.substring(1),n));return o.bytes=r.split("").map(function(u){return u.charCodeAt(0)}),o}return ko(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,o=n.shift()-105,u=j.SET_BY_CODE[o];if(u===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(j.FNC1);var l=e.next(n,1,u);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+l.result+e.getBar((l.checksum+o)%j.MODULO)+e.getBar(j.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return j.BARS[n]?j.BARS[n].toString():""}},{key:"correctIndex",value:function(n,o){if(o===j.SET_A){var u=n.shift();return u<32?u+64:u-32}else return o===j.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,o,u){if(!n.length)return{result:"",checksum:0};var l=void 0,c=void 0;if(n[0]>=200){c=n.shift()-105;var $=j.SWAP[c];$!==void 0?l=e.next(n,o+1,$):((u===j.SET_A||u===j.SET_B)&&c===j.SHIFT&&(n[0]=u===j.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),l=e.next(n,o+1,u))}else c=e.correctIndex(n,u),l=e.next(n,o+1,u);var R=e.getBar(c),y=c*o;return{result:R+l.result,checksum:y+l.checksum}}}]),e}(Ao.default);Oe.default=Do;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var ue=S,Yn=function(e){return e.match(new RegExp("^"+ue.A_CHARS+"*"))[0].length},Zn=function(e){return e.match(new RegExp("^"+ue.B_CHARS+"*"))[0].length},Kn=function(e){return e.match(new RegExp("^"+ue.C_CHARS+"*"))[0]};function Pt(t,e){var r=e?ue.A_CHARS:ue.B_CHARS,n=t.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+String.fromCharCode(204)+er(t.substring(n[1].length));var o=t.match(new RegExp("^"+r+"+"))[0];return o.length===t.length?t:o+String.fromCharCode(e?205:206)+Pt(t.substring(o.length),!e)}function er(t){var e=Kn(t),r=e.length;if(r===t.length)return t;t=t.substring(r);var n=Yn(t)>=Zn(t);return e+String.fromCharCode(n?206:205)+Pt(t,n)}kt.default=function(t){var e=void 0,r=Kn(t).length;if(r>=2)e=ue.C_START_CHAR+er(t);else{var n=Yn(t)>Zn(t);e=(n?ue.A_START_CHAR:ue.B_START_CHAR)+Pt(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,u){return String.fromCharCode(203)+u})};Object.defineProperty(Ct,"__esModule",{value:!0});var Bo=Oe,No=tr(Bo),Lo=kt,jo=tr(Lo);function tr(t){return t&&t.__esModule?t:{default:t}}function Go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Fo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Uo=function(t){Fo(e,t);function e(r,n){if(Go(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(r))var o=_t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,jo.default)(r),n));else var o=_t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return _t(o)}return e}(No.default);Ct.default=Uo;var At={};Object.defineProperty(At,"__esModule",{value:!0});var qo=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Vo=Oe,zo=Ho(Vo),Sn=S;function Ho(t){return t&&t.__esModule?t:{default:t}}function Xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jo=function(t){Wo(e,t);function e(r,n){return Xo(this,e),Qo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Sn.A_START_CHAR+r,n))}return qo(e,[{key:"valid",value:function(){return new RegExp("^"+Sn.A_CHARS+"+$").test(this.data)}}]),e}(zo.default);At.default=Jo;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var Yo=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Zo=Oe,Ko=ea(Zo),Cn=S;function ea(t){return t&&t.__esModule?t:{default:t}}function ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function na(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ra(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oa=function(t){ra(e,t);function e(r,n){return ta(this,e),na(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Cn.B_START_CHAR+r,n))}return Yo(e,[{key:"valid",value:function(){return new RegExp("^"+Cn.B_CHARS+"+$").test(this.data)}}]),e}(Ko.default);Tt.default=oa;var It={};Object.defineProperty(It,"__esModule",{value:!0});var aa=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ia=Oe,ua=la(ia),kn=S;function la(t){return t&&t.__esModule?t:{default:t}}function ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function da(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fa=function(t){da(e,t);function e(r,n){return ca(this,e),sa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,kn.C_START_CHAR+r,n))}return aa(e,[{key:"valid",value:function(){return new RegExp("^"+kn.C_CHARS+"+$").test(this.data)}}]),e}(ua.default);It.default=fa;Object.defineProperty(J,"__esModule",{value:!0});J.CODE128C=J.CODE128B=J.CODE128A=J.CODE128=void 0;var ha=Ct,va=Ke(ha),ma=At,_a=Ke(ma),pa=Tt,ga=Ke(pa),ba=It,ya=Ke(ba);function Ke(t){return t&&t.__esModule?t:{default:t}}J.CODE128=va.default;J.CODE128A=_a.default;J.CODE128B=ga.default;J.CODE128C=ya.default;var N={},Rt={},V={};Object.defineProperty(V,"__esModule",{value:!0});V.SIDE_BIN="101";V.MIDDLE_BIN="01010";V.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};V.EAN2_STRUCTURE=["LL","LG","GL","GG"];V.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];V.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var et={},he={};Object.defineProperty(he,"__esModule",{value:!0});var xa=V,wa=function(e,r,n){var o=e.split("").map(function(l,c){return xa.BINARIES[r[c]]}).map(function(l,c){return l?l[e[c]]:""});if(n){var u=e.length-1;o=o.map(function(l,c){return c<u?l+n:l})}return o.join("")};he.default=wa;Object.defineProperty(et,"__esModule",{value:!0});var Ea=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),be=V,$a=he,Pn=nr($a),Oa=L,Sa=nr(Oa);function nr(t){return t&&t.__esModule?t:{default:t}}function Ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ka(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Pa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Aa=function(t){Pa(e,t);function e(r,n){Ca(this,e);var o=ka(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return o.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return Ea(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,o){return this.text.substr(n,o)}},{key:"leftEncode",value:function(n,o){return(0,Pn.default)(n,o)}},{key:"rightText",value:function(n,o){return this.text.substr(n,o)}},{key:"rightEncode",value:function(n,o){return(0,Pn.default)(n,o)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:be.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:n},{data:be.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:n},{data:be.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var n=[be.SIDE_BIN,this.leftEncode(),be.MIDDLE_BIN,this.rightEncode(),be.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),e}(Sa.default);et.default=Aa;Object.defineProperty(Rt,"__esModule",{value:!0});var Ta=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Be=function t(e,r,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(o===void 0){var u=Object.getPrototypeOf(e);return u===null?void 0:t(u,r,n)}else{if("value"in o)return o.value;var l=o.get;return l===void 0?void 0:l.call(n)}},Ia=V,Ra=et,Ma=Da(Ra);function Da(t){return t&&t.__esModule?t:{default:t}}function Ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Na(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function La(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var An=function(e){var r=e.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,o,u){return u%2?n+o*3:n+o},0);return(10-r%10)%10},ja=function(t){La(e,t);function e(r,n){Ba(this,e),r.search(/^[0-9]{12}$/)!==-1&&(r+=An(r));var o=Na(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return o.lastChar=n.lastChar,o}return Ta(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===An(this.data)}},{key:"leftText",value:function(){return Be(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),o=Ia.EAN13_STRUCTURE[this.data[0]];return Be(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,o)}},{key:"rightText",value:function(){return Be(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return Be(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=Be(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),e}(Ma.default);Rt.default=ja;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var Ga=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),He=function t(e,r,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(o===void 0){var u=Object.getPrototypeOf(e);return u===null?void 0:t(u,r,n)}else{if("value"in o)return o.value;var l=o.get;return l===void 0?void 0:l.call(n)}},Fa=et,Ua=qa(Fa);function qa(t){return t&&t.__esModule?t:{default:t}}function Va(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function za(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ha(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Tn=function(e){var r=e.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,o,u){return u%2?n+o:n+o*3},0);return(10-r%10)%10},Xa=function(t){Ha(e,t);function e(r,n){return Va(this,e),r.search(/^[0-9]{7}$/)!==-1&&(r+=Tn(r)),za(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return Ga(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===Tn(this.data)}},{key:"leftText",value:function(){return He(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return He(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return He(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return He(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),e}(Ua.default);Mt.default=Xa;var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});var Qa=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Wa=V,Ja=he,Ya=rr(Ja),Za=L,Ka=rr(Za);function rr(t){return t&&t.__esModule?t:{default:t}}function ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ni(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ri=function(e){var r=e.split("").map(function(n){return+n}).reduce(function(n,o,u){return u%2?n+o*9:n+o*3},0);return r%10},oi=function(t){ni(e,t);function e(r,n){return ei(this,e),ti(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return Qa(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=Wa.EAN5_STRUCTURE[ri(this.data)];return{data:"1011"+(0,Ya.default)(this.data,n,"01"),text:this.text}}}]),e}(Ka.default);Dt.default=oi;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});var ai=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ii=V,ui=he,li=or(ui),ci=L,si=or(ci);function or(t){return t&&t.__esModule?t:{default:t}}function di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vi=function(t){hi(e,t);function e(r,n){return di(this,e),fi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return ai(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=ii.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,li.default)(this.data,n,"01"),text:this.text}}}]),e}(si.default);Bt.default=vi;var je={};Object.defineProperty(je,"__esModule",{value:!0});var mi=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();je.checksum=xt;var _i=he,ye=ar(_i),pi=L,gi=ar(pi);function ar(t){return t&&t.__esModule?t:{default:t}}function bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wi=function(t){xi(e,t);function e(r,n){bi(this,e),r.search(/^[0-9]{11}$/)!==-1&&(r+=xt(r));var o=yi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return o.displayValue=n.displayValue,n.fontSize>n.width*10?o.fontSize=n.width*10:o.fontSize=n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return mi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==xt(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,ye.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,ye.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,ye.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,ye.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,ye.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,ye.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),e}(gi.default);function xt(t){var e=0,r;for(r=1;r<11;r+=2)e+=parseInt(t[r]);for(r=0;r<11;r+=2)e+=parseInt(t[r])*3;return(10-e%10)%10}je.default=wi;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var Ei=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),$i=he,Oi=ir($i),Si=L,Ci=ir(Si),ki=je;function ir(t){return t&&t.__esModule?t:{default:t}}function Pi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ai(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ti=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Ii=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Ri=function(t){Ai(e,t);function e(r,n){Pi(this,e);var o=pt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));if(o.isValid=!1,r.search(/^[0-9]{6}$/)!==-1)o.middleDigits=r,o.upcA=In(r,"0"),o.text=n.text||""+o.upcA[0]+r+o.upcA[o.upcA.length-1],o.isValid=!0;else if(r.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=r.substring(1,r.length-1),o.upcA=In(o.middleDigits,r[0]),o.upcA[o.upcA.length-1]===r[r.length-1])o.isValid=!0;else return pt(o);else return pt(o);return o.displayValue=n.displayValue,n.fontSize>n.width*10?o.fontSize=n.width*10:o.fontSize=n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return Ei(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],o=this.upcA[this.upcA.length-1],u=Ii[parseInt(o)][parseInt(n)];return(0,Oi.default)(this.middleDigits,u)}}]),e}(Ci.default);function In(t,e){for(var r=parseInt(t[t.length-1]),n=Ti[r],o="",u=0,l=0;l<n.length;l++){var c=n[l];c==="X"?o+=t[u++]:o+=c}return o=""+e+o,""+o+(0,ki.checksum)(o)}Nt.default=Ri;Object.defineProperty(N,"__esModule",{value:!0});N.UPCE=N.UPC=N.EAN2=N.EAN5=N.EAN8=N.EAN13=void 0;var Mi=Rt,Di=Se(Mi),Bi=Mt,Ni=Se(Bi),Li=Dt,ji=Se(Li),Gi=Bt,Fi=Se(Gi),Ui=je,qi=Se(Ui),Vi=Nt,zi=Se(Vi);function Se(t){return t&&t.__esModule?t:{default:t}}N.EAN13=Di.default;N.EAN8=Ni.default;N.EAN5=ji.default;N.EAN2=Fi.default;N.UPC=qi.default;N.UPCE=zi.default;var $e={},tt={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.START_BIN="1010";Ge.END_BIN="11101";Ge.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(tt,"__esModule",{value:!0});var Hi=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Xe=Ge,Xi=L,Qi=Wi(Xi);function Wi(t){return t&&t.__esModule?t:{default:t}}function Ji(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Zi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ki=function(t){Zi(e,t);function e(){return Ji(this,e),Yi(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Hi(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,o=this.data.match(/.{2}/g).map(function(u){return n.encodePair(u)}).join("");return{data:Xe.START_BIN+o+Xe.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var o=Xe.BINARIES[n[1]];return Xe.BINARIES[n[0]].split("").map(function(u,l){return(u==="1"?"111":"1")+(o[l]==="1"?"000":"0")}).join("")}}]),e}(Qi.default);tt.default=Ki;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});var eu=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),tu=tt,nu=ru(tu);function ru(t){return t&&t.__esModule?t:{default:t}}function ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function au(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function iu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Rn=function(e){var r=e.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,o,u){return n+o*(3-u%2*2)},0);return Math.ceil(r/10)*10-r},uu=function(t){iu(e,t);function e(r,n){return ou(this,e),r.search(/^[0-9]{13}$/)!==-1&&(r+=Rn(r)),au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return eu(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Rn(this.data)}}]),e}(nu.default);Lt.default=uu;Object.defineProperty($e,"__esModule",{value:!0});$e.ITF14=$e.ITF=void 0;var lu=tt,cu=ur(lu),su=Lt,du=ur(su);function ur(t){return t&&t.__esModule?t:{default:t}}$e.ITF=cu.default;$e.ITF14=du.default;var q={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});var fu=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),hu=L,vu=mu(hu);function mu(t){return t&&t.__esModule?t:{default:t}}function _u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pu(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bu=function(t){gu(e,t);function e(r,n){return _u(this,e),pu(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return fu(e,[{key:"encode",value:function(){for(var n="110",o=0;o<this.data.length;o++){var u=parseInt(this.data[o]),l=u.toString(2);l=yu(l,4-l.length);for(var c=0;c<l.length;c++)n+=l[c]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(vu.default);function yu(t,e){for(var r=0;r<e;r++)t="0"+t;return t}ve.default=bu;var jt={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.mod10=xu;me.mod11=wu;function xu(t){for(var e=0,r=0;r<t.length;r++){var n=parseInt(t[r]);(r+t.length)%2===0?e+=n:e+=n*2%10+Math.floor(n*2/10)}return(10-e%10)%10}function wu(t){for(var e=0,r=[2,3,4,5,6,7],n=0;n<t.length;n++){var o=parseInt(t[t.length-1-n]);e+=r[n%r.length]*o}return(11-e%11)%11}Object.defineProperty(jt,"__esModule",{value:!0});var Eu=ve,$u=Su(Eu),Ou=me;function Su(t){return t&&t.__esModule?t:{default:t}}function Cu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ku(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Pu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Au=function(t){Pu(e,t);function e(r,n){return Cu(this,e),ku(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,Ou.mod10)(r),n))}return e}($u.default);jt.default=Au;var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});var Tu=ve,Iu=Mu(Tu),Ru=me;function Mu(t){return t&&t.__esModule?t:{default:t}}function Du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bu(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Nu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Lu=function(t){Nu(e,t);function e(r,n){return Du(this,e),Bu(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,Ru.mod11)(r),n))}return e}(Iu.default);Gt.default=Lu;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});var ju=ve,Gu=Fu(ju),Mn=me;function Fu(t){return t&&t.__esModule?t:{default:t}}function Uu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qu(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Vu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var zu=function(t){Vu(e,t);function e(r,n){return Uu(this,e),r+=(0,Mn.mod10)(r),r+=(0,Mn.mod10)(r),qu(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(Gu.default);Ft.default=zu;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});var Hu=ve,Xu=Qu(Hu),Dn=me;function Qu(t){return t&&t.__esModule?t:{default:t}}function Wu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ju(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Zu=function(t){Yu(e,t);function e(r,n){return Wu(this,e),r+=(0,Dn.mod11)(r),r+=(0,Dn.mod10)(r),Ju(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(Xu.default);Ut.default=Zu;Object.defineProperty(q,"__esModule",{value:!0});q.MSI1110=q.MSI1010=q.MSI11=q.MSI10=q.MSI=void 0;var Ku=ve,el=Fe(Ku),tl=jt,nl=Fe(tl),rl=Gt,ol=Fe(rl),al=Ft,il=Fe(al),ul=Ut,ll=Fe(ul);function Fe(t){return t&&t.__esModule?t:{default:t}}q.MSI=el.default;q.MSI10=nl.default;q.MSI11=ol.default;q.MSI1010=il.default;q.MSI1110=ll.default;var nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.pharmacode=void 0;var cl=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),sl=L,dl=fl(sl);function fl(t){return t&&t.__esModule?t:{default:t}}function hl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ml(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _l=function(t){ml(e,t);function e(r,n){hl(this,e);var o=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return o.number=parseInt(r,10),o}return cl(e,[{key:"encode",value:function(){for(var n=this.number,o="";!isNaN(n)&&n!=0;)n%2===0?(o="11100"+o,n=(n-2)/2):(o="100"+o,n=(n-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(dl.default);nt.pharmacode=_l;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.codabar=void 0;var pl=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),gl=L,bl=yl(gl);function yl(t){return t&&t.__esModule?t:{default:t}}function xl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function El(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $l=function(t){El(e,t);function e(r,n){xl(this,e),r.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(r="A"+r+"A");var o=wl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.toUpperCase(),n));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return pl(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],o=this.getEncodings(),u=0;u<this.data.length;u++)n.push(o[this.data.charAt(u)]),u!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(bl.default);rt.codabar=$l;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.GenericBarcode=void 0;var Ol=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Sl=L,Cl=kl(Sl);function kl(t){return t&&t.__esModule?t:{default:t}}function Pl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Al(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Tl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Il=function(t){Tl(e,t);function e(r,n){return Pl(this,e),Al(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return Ol(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Cl.default);ot.GenericBarcode=Il;Object.defineProperty(St,"__esModule",{value:!0});var Rl=Ze,Qe=J,xe=N,Bn=$e,Ne=q,Ml=nt,Dl=rt,Bl=ot;St.default={CODE39:Rl.CODE39,CODE128:Qe.CODE128,CODE128A:Qe.CODE128A,CODE128B:Qe.CODE128B,CODE128C:Qe.CODE128C,EAN13:xe.EAN13,EAN8:xe.EAN8,EAN5:xe.EAN5,EAN2:xe.EAN2,UPC:xe.UPC,UPCE:xe.UPCE,ITF14:Bn.ITF14,ITF:Bn.ITF,MSI:Ne.MSI,MSI10:Ne.MSI10,MSI11:Ne.MSI11,MSI1010:Ne.MSI1010,MSI1110:Ne.MSI1110,pharmacode:Ml.pharmacode,codabar:Dl.codabar,GenericBarcode:Bl.GenericBarcode};var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});var Nl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};Ce.default=function(t,e){return Nl({},t,e)};var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.default=Ll;function Ll(t){var e=[];function r(n){if(Array.isArray(n))for(var o=0;o<n.length;o++)r(n[o]);else n.text=n.text||"",n.data=n.data||"",e.push(n)}return r(t),e}var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.default=jl;function jl(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var zt={},Ht={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.default=Gl;function Gl(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in e)e.hasOwnProperty(r)&&(r=e[r],typeof t[r]=="string"&&(t[r]=parseInt(t[r],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var it={};Object.defineProperty(it,"__esModule",{value:!0});var Fl={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};it.default=Fl;Object.defineProperty(Ht,"__esModule",{value:!0});var Ul=at,ql=lr(Ul),Vl=it,Nn=lr(Vl);function lr(t){return t&&t.__esModule?t:{default:t}}function zl(t){var e={};for(var r in Nn.default)Nn.default.hasOwnProperty(r)&&(t.hasAttribute("jsbarcode-"+r.toLowerCase())&&(e[r]=t.getAttribute("jsbarcode-"+r.toLowerCase())),t.hasAttribute("data-"+r.toLowerCase())&&(e[r]=t.getAttribute("data-"+r.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,ql.default)(e),e}Ht.default=zl;var Xt={},Qt={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.getTotalWidthOfEncodings=F.calculateEncodingAttributes=F.getBarcodePadding=F.getEncodingHeight=F.getMaximumHeightOfEncodings=void 0;var Hl=Ce,Xl=Ql(Hl);function Ql(t){return t&&t.__esModule?t:{default:t}}function cr(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function sr(t,e,r){if(r.displayValue&&e<t){if(r.textAlign=="center")return Math.floor((t-e)/2);if(r.textAlign=="left")return 0;if(r.textAlign=="right")return Math.floor(t-e)}return 0}function Wl(t,e,r){for(var n=0;n<t.length;n++){var o=t[n],u=(0,Xl.default)(e,o.options),l;u.displayValue?l=Zl(o.text,u,r):l=0;var c=o.data.length*u.width;o.width=Math.ceil(Math.max(l,c)),o.height=cr(o,u),o.barcodePadding=sr(l,c,u)}}function Jl(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].width;return e}function Yl(t){for(var e=0,r=0;r<t.length;r++)t[r].height>e&&(e=t[r].height);return e}function Zl(t,e,r){var n;if(r)n=r;else if(typeof document<"u")n=document.createElement("canvas").getContext("2d");else return 0;n.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=n.measureText(t);if(!o)return 0;var u=o.width;return u}F.getMaximumHeightOfEncodings=Yl;F.getEncodingHeight=cr;F.getBarcodePadding=sr;F.calculateEncodingAttributes=Wl;F.getTotalWidthOfEncodings=Jl;Object.defineProperty(Qt,"__esModule",{value:!0});var Kl=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ec=Ce,tc=nc(ec),gt=F;function nc(t){return t&&t.__esModule?t:{default:t}}function rc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var oc=function(){function t(e,r,n){rc(this,t),this.canvas=e,this.encodings=r,this.options=n}return Kl(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var n=(0,tc.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(n,this.encodings[r]),this.drawCanvasText(n,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,gt.calculateEncodingAttributes)(this.encodings,this.options,r);var n=(0,gt.getTotalWidthOfEncodings)(this.encodings),o=(0,gt.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,n){var o=this.canvas.getContext("2d"),u=n.data,l;r.textPosition=="top"?l=r.marginTop+r.fontSize+r.textMargin:l=r.marginTop,o.fillStyle=r.lineColor;for(var c=0;c<u.length;c++){var $=c*r.width+n.barcodePadding;u[c]==="1"?o.fillRect($,l,r.width,r.height):u[c]&&o.fillRect($,l,r.width,r.height*u[c])}}},{key:"drawCanvasText",value:function(r,n){var o=this.canvas.getContext("2d"),u=r.fontOptions+" "+r.fontSize+"px "+r.font;if(r.displayValue){var l,c;r.textPosition=="top"?c=r.marginTop+r.fontSize-r.textMargin:c=r.height+r.textMargin+r.marginTop+r.fontSize,o.font=u,r.textAlign=="left"||n.barcodePadding>0?(l=0,o.textAlign="left"):r.textAlign=="right"?(l=n.width-1,o.textAlign="right"):(l=n.width/2,o.textAlign="center"),o.fillText(n.text,l,c)}}},{key:"moveCanvasDrawing",value:function(r){var n=this.canvas.getContext("2d");n.translate(r.width,0)}},{key:"restoreCanvas",value:function(){var r=this.canvas.getContext("2d");r.restore()}}]),t}();Qt.default=oc;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var ac=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ic=Ce,uc=lc(ic),bt=F;function lc(t){return t&&t.__esModule?t:{default:t}}function cc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var We="http://www.w3.org/2000/svg",sc=function(){function t(e,r,n){cc(this,t),this.svg=e,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return ac(t,[{key:"render",value:function(){var r=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var o=this.encodings[n],u=(0,uc.default)(this.options,o.options),l=this.createGroup(r,u.marginTop,this.svg);this.setGroupOptions(l,u),this.drawSvgBarcode(l,u,o),this.drawSVGText(l,u,o),r+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,bt.calculateEncodingAttributes)(this.encodings,this.options);var r=(0,bt.getTotalWidthOfEncodings)(this.encodings),n=(0,bt.getMaximumHeightOfEncodings)(this.encodings),o=r+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,n),this.options.background&&this.drawRect(0,0,o,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(r,n,o){var u=o.data,l;n.textPosition=="top"?l=n.fontSize+n.textMargin:l=0;for(var c=0,$=0,R=0;R<u.length;R++)$=R*n.width+o.barcodePadding,u[R]==="1"?c++:c>0&&(this.drawRect($-n.width*c,l,n.width*c,n.height,r),c=0);c>0&&this.drawRect($-n.width*(c-1),l,n.width*c,n.height,r)}},{key:"drawSVGText",value:function(r,n,o){var u=this.document.createElementNS(We,"text");if(n.displayValue){var l,c;u.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?c=n.fontSize-n.textMargin:c=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||o.barcodePadding>0?(l=0,u.setAttribute("text-anchor","start")):n.textAlign=="right"?(l=o.width-1,u.setAttribute("text-anchor","end")):(l=o.width/2,u.setAttribute("text-anchor","middle")),u.setAttribute("x",l),u.setAttribute("y",c),u.appendChild(this.document.createTextNode(o.text)),r.appendChild(u)}}},{key:"setSvgAttributes",value:function(r,n){var o=this.svg;o.setAttribute("width",r+"px"),o.setAttribute("height",n+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+r+" "+n),o.setAttribute("xmlns",We),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(r,n,o){var u=this.document.createElementNS(We,"g");return u.setAttribute("transform","translate("+r+", "+n+")"),o.appendChild(u),u}},{key:"setGroupOptions",value:function(r,n){r.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(r,n,o,u,l){var c=this.document.createElementNS(We,"rect");return c.setAttribute("x",r),c.setAttribute("y",n),c.setAttribute("width",o),c.setAttribute("height",u),l.appendChild(c),c}}]),t}();Wt.default=sc;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});var dc=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function fc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var hc=function(){function t(e,r,n){fc(this,t),this.object=e,this.encodings=r,this.options=n}return dc(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Jt.default=hc;Object.defineProperty(Xt,"__esModule",{value:!0});var vc=Qt,mc=Yt(vc),_c=Wt,pc=Yt(_c),gc=Jt,bc=Yt(gc);function Yt(t){return t&&t.__esModule?t:{default:t}}Xt.default={CanvasRenderer:mc.default,SVGRenderer:pc.default,ObjectRenderer:bc.default};var ke={};Object.defineProperty(ke,"__esModule",{value:!0});function Zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function en(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yc=function(t){en(e,t);function e(r,n){Zt(this,e);var o=Kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=r,o.input=n,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),xc=function(t){en(e,t);function e(){Zt(this,e);var r=Kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return e}(Error),wc=function(t){en(e,t);function e(){Zt(this,e);var r=Kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return e}(Error);ke.InvalidInputException=yc;ke.InvalidElementException=xc;ke.NoElementException=wc;Object.defineProperty(zt,"__esModule",{value:!0});var Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c=Ht,wt=dr($c),Oc=Xt,Le=dr(Oc),Sc=ke;function dr(t){return t&&t.__esModule?t:{default:t}}function tn(t){if(typeof t=="string")return Cc(t);if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(tn(t[r]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return kc(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,wt.default)(t),renderer:Le.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,wt.default)(t),renderer:Le.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Le.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":Ec(t))==="object"&&!t.nodeName)return{element:t,renderer:Le.default.ObjectRenderer};throw new Sc.InvalidElementException}}function Cc(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var r=[],n=0;n<e.length;n++)r.push(tn(e[n]));return r}}function kc(t){var e=document.createElement("canvas");return{element:e,options:(0,wt.default)(t),renderer:Le.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}zt.default=tn;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});var Pc=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function Ac(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Tc=function(){function t(e){Ac(this,t),this.api=e}return Pc(t,[{key:"handleCatch",value:function(r){if(r.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw r.message;else throw r;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(r){try{var n=r.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(o){return this.handleCatch(o),this.api}}}]),t}();nn.default=Tc;var Ic=St,fe=le(Ic),Rc=Ce,Ue=le(Rc),Mc=qt,fr=le(Mc),Dc=Vt,Ln=le(Dc),Bc=zt,Nc=le(Bc),Lc=at,jc=le(Lc),Gc=nn,Fc=le(Gc),hr=ke,Uc=it,vr=le(Uc);function le(t){return t&&t.__esModule?t:{default:t}}var te=function(){},ut=function(e,r,n){var o=new te;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,Nc.default)(e),o._encodings=[],o._options=vr.default,o._errorHandler=new Fc.default(o),typeof r<"u"&&(n=n||{},n.format||(n.format=_r()),o.options(n)[n.format](r,n).render()),o};ut.getModule=function(t){return fe.default[t]};for(var jn in fe.default)fe.default.hasOwnProperty(jn)&&qc(fe.default,jn);function qc(t,e){te.prototype[e]=te.prototype[e.toUpperCase()]=te.prototype[e.toLowerCase()]=function(r,n){var o=this;return o._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text>"u"?void 0:""+n.text;var u=(0,Ue.default)(o._options,n);u=(0,jc.default)(u);var l=t[e],c=mr(r,l,u);return o._encodings.push(c),o})}}function mr(t,e,r){t=""+t;var n=new e(t,r);if(!n.valid())throw new hr.InvalidInputException(n.constructor.name,t);var o=n.encode();o=(0,fr.default)(o);for(var u=0;u<o.length;u++)o[u].options=(0,Ue.default)(r,o[u].options);return o}function _r(){return fe.default.CODE128?"CODE128":Object.keys(fe.default)[0]}te.prototype.options=function(t){return this._options=(0,Ue.default)(this._options,t),this};te.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};te.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var r=(0,Ue.default)(this._options,t.options);r.format=="auto"&&(r.format=_r()),this._errorHandler.wrapBarcodeCall(function(){var n=r.value,o=fe.default[r.format.toUpperCase()],u=mr(n,o,r);Et(t,u,r)})}}};te.prototype.render=function(){if(!this._renderProperties)throw new hr.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)Et(this._renderProperties[t],this._encodings,this._options);else Et(this._renderProperties,this._encodings,this._options);return this};te.prototype._defaults=vr.default;function Et(t,e,r){e=(0,fr.default)(e);for(var n=0;n<e.length;n++)e[n].options=(0,Ue.default)(r,e[n].options),(0,Ln.default)(e[n].options);(0,Ln.default)(r);var o=t.renderer,u=new o(t.element,e,r);u.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=ut);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var r=[];return jQuery(this).each(function(){r.push(this)}),ut(r,t,e)});var Vc=ut;const zc=zr(Vc),Hc={class:"breadcrumb mb-6 flex flex-wrap items-center gap-2"},Xc={key:0,class:"text-gray-500"},Qc=["onClick"],Wc={__name:"BreadcrumbNavigation",props:{breadcrumbs:{type:Array,default:()=>[]}},setup(t){return(e,r)=>(d(),h("div",Hc,[a("span",{class:"text-[#b51919] cursor-pointer hover:underline",onClick:r[0]||(r[0]=n=>e.$emit("reset"))}," Home "),t.breadcrumbs.length?(d(),h("span",Xc,"/")):w("",!0),(d(!0),h(G,null,X(t.breadcrumbs,(n,o)=>(d(),h("span",{key:o,onClick:u=>e.$emit("navigate",o),class:"text-[#b51919] cursor-pointer hover:underline"},b(n),9,Qc))),128))]))}},Jc=a("h2",{class:"text-xl font-bold mb-2"},"Cart",-1),Yc={key:0,class:"text-gray-500 text-center text-base"},Zc={key:1},Kc={class:"w-full text-base"},es=a("thead",null,[a("tr",{class:"border-b"},[a("th",{class:"text-left py-2"},"Product"),a("th",{class:"text-left py-2"},"Qty"),a("th",{class:"text-left py-2"},"Price"),a("th",{class:"text-left py-2"},"Disc."),a("th",{class:"text-left py-2"},"Total"),a("th",{class:"text-center py-2"},"Act")])],-1),ts={class:"py-2"},ns={class:"py-2"},rs={key:0,class:"flex items-center space-x-2"},os=["onClick"],as=["onUpdate:modelValue","onInput"],is=["onClick"],us=["onClick"],ls={key:1,class:"flex items-center space-x-2"},cs={class:"text-lg"},ss=["onClick"],ds={class:"py-2"},fs=["onClick"],hs={class:"py-2"},vs=["onClick"],ms={class:"py-2 text-lg"},_s={class:"py-2 text-center"},ps={class:"mt-4 text-lg"},gs=a("strong",null,"Subtotal:",-1),bs={class:"mt-2 flex items-center gap-2"},ys=a("label",{for:"discountAllItemsPercent",class:"font-bold"}," Discount All (%): ",-1),xs={class:"mt-2 flex items-center gap-2"},ws=a("label",{for:"discountEntireSale",class:"font-bold"}," Sale Discount: ",-1),Es={class:"mt-4 text-2xl font-bold"},pr={__name:"CartTable",props:{cart:Array,discountAllItemsPercent:Number,discountEntireSale:Number,subTotalBeforeGlobalDiscount:Number,totalCartAmount:Number},emits:["update:discountAllItemsPercent","update:discountEntireSale","openItemPriceModal","openItemDiscountModal","removeFromCart"],setup(t,{emit:e}){const r=t,n=x(null);Ee(()=>r.cart.length,(m,v)=>{m>v&&Fn(()=>{n.value&&(n.value.scrollTop=n.value.scrollHeight)})});const o=C({get:()=>r.discountAllItemsPercent,set:m=>e("update:discountAllItemsPercent",Number(m))}),u=C({get:()=>r.discountEntireSale,set:m=>e("update:discountEntireSale",Number(m))}),l=x({});function c(m){l.value[m]=!l.value[m]}function $(m){const v=r.cart[m];v.quantity=Number(v.quantity)+1}function R(m){const v=r.cart[m];v.quantity>1&&(v.quantity=Number(v.quantity)-1)}function y(m,v){const O=r.cart[m];let p=Number(v.target.value);p<1?O.quantity=1:O.quantity=Math.round(p)}return(m,v)=>(d(),h("div",null,[Jc,t.cart.length===0?(d(),h("div",Yc,"No items in cart")):(d(),h("div",Zc,[a("div",{class:"max-h-64 overflow-y-auto",ref_key:"cartContainer",ref:n},[a("table",Kc,[es,a("tbody",null,[(d(!0),h(G,null,X(t.cart,(O,p)=>(d(),h("tr",{key:O.id,class:"border-b"},[a("td",ts,b(O.name),1),a("td",ns,[l.value[p]?(d(),h("div",rs,[a("button",{onClick:_=>R(p),class:"bg-red-500 text-white w-8 h-8 rounded-lg flex items-center justify-center text-lg"}," – ",8,os),T(a("input",{type:"number","onUpdate:modelValue":_=>O.quantity=_,onInput:_=>y(p,_),class:"w-16 text-center text-lg font-bold border rounded-lg p-1",min:"1",step:"1"},null,40,as),[[I,O.quantity,void 0,{number:!0}]]),a("button",{onClick:_=>$(p),class:"bg-green-500 text-white w-8 h-8 rounded-lg flex items-center justify-center text-lg"}," + ",8,is),a("button",{onClick:_=>c(p),class:"bg-blue-500 w-16 h-8 rounded-lg flex items-center justify-center text-lg text-white"}," Done ",8,us)])):(d(),h("div",ls,[a("span",cs,b(O.quantity),1),a("button",{onClick:_=>c(p),class:"text-lg text-blue-500 underline"}," Edit ",8,ss)]))]),a("td",ds,[a("a",{class:"text-[#b51919] hover:underline cursor-pointer text-lg",onClick:yt(_=>m.$emit("openItemPriceModal",p),["stop"])}," ₱"+b(Number(O.price).toFixed(2)),9,fs)]),a("td",hs,[a("a",{class:"text-[#b51919] hover:underline cursor-pointer text-lg",onClick:yt(_=>m.$emit("openItemDiscountModal",p),["stop"])}," ₱"+b(O.discount.toFixed(2)),9,vs)]),a("td",ms," ₱"+b(((O.price-O.discount)*O.quantity).toFixed(2)),1),a("td",_s,[Q(we,{onClick:_=>m.$emit("removeFromCart",p),class:"hover:bg-red-700 bg-red-600 text-white rounded-lg cursor-pointer",path:P(Zr),size:"18"},null,8,["onClick","path"])])]))),128))])])],512),a("div",ps,[a("p",null,[gs,ee(" ₱"+b(t.subTotalBeforeGlobalDiscount.toFixed(2)),1)]),a("p",bs,[ys,T(a("input",{id:"discountAllItemsPercent","onUpdate:modelValue":v[0]||(v[0]=O=>o.value=O),type:"number",min:"0",max:"100",class:"w-16 p-2 border rounded text-lg"},null,512),[[I,o.value,void 0,{number:!0}]]),ee(" % ")]),a("p",xs,[ws,T(a("input",{id:"discountEntireSale","onUpdate:modelValue":v[1]||(v[1]=O=>u.value=O),type:"number",min:"0",class:"w-16 p-2 border rounded text-lg"},null,512),[[I,u.value,void 0,{number:!0}]])]),a("div",Es,"Total: ₱"+b(t.totalCartAmount.toFixed(2)),1)])]))]))}};const $s={key:0,class:"sticky top-0 z-50 bg-white shadow p-2"},Os={class:"mb-2 text-center"},Ss={key:0,class:"mb-2 text-center overflow-x-auto whitespace-nowrap"},Cs=["onClick"],ks={key:1,class:"relative px-4 mb-3"},Ps={key:0,class:"absolute bg-white border rounded mt-1 w-full z-10"},As=["onClick"],Ts={key:2,class:"mb-6 mx-4"},Is={class:"bg-white rounded-lg shadow-lg p-6 border border-gray-200"},Rs={key:3},Ms={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Ds=["src"],Bs={class:"font-bold text-lg text-center"},Ns={class:"text-lg text-gray-600"},Ls=["onClick"],js={class:"text-lg font-bold"},Gs=["onClick"],Fs=["src"],Us=["src"],qs={class:"font-bold text-lg text-center"},Vs={class:"text-lg text-gray-600"},zs=["onClick"],Hs={class:"text-lg font-bold"},Xs={key:3,class:"col-span-full text-center text-gray-500 text-lg"},Qs={key:0,class:"text-center text-lg text-gray-500"},Ws={key:1},Js=["onClick"],Ys=["src"],Zs=["src"],Ks={class:"font-bold text-lg text-center"},ed={class:"text-lg text-gray-600"},td={key:0,class:"col-span-full text-center text-gray-500 text-lg"},nd={__name:"ProductGrid",props:{searchQuery:String,categories:Array,currentCategory:String,breadcrumbs:Array,singleGlobalSingleMatch:Object,filteredCategories:Array,filteredProducts:Array,visibleSubcategories:Array,isInCart:Function,showGrid:Boolean,cart:Array,discountAllItemsPercent:Number,discountEntireSale:Number,subTotalBeforeGlobalDiscount:Number,totalCartAmount:Number},emits:["selectCategory","toggleProduct","openItemPriceModal","openItemDiscountModal","removeFromCart","update:discountAllItemsPercent","update:discountEntireSale"],setup(t,{emit:e}){const r=t,n=x("category");function o(p){n.value=p,u.isLoaded||u.fetchItems()}const u=Yr(),l=C(()=>u.items.data.slice().sort((p,_)=>p.name.localeCompare(_.name))),c=x("All"),$=C(()=>{const p=new Set;return l.value.forEach(_=>{_.name&&typeof _.name=="string"&&p.add(_.name.charAt(0).toUpperCase())}),Array.from(p).sort()}),R=C(()=>["All",...$.value]),y=C(()=>{let p=l.value;if(c.value!=="All"&&(p=p.filter(_=>_.name.charAt(0).toUpperCase()===c.value)),r.searchQuery){const _=r.searchQuery.toLowerCase();p=p.filter(f=>f.name.toLowerCase().includes(_))}return p}),m=x(""),v=C(()=>{const p=m.value.trim().toLowerCase();return p?l.value.filter(_=>{const f=_.name.toLowerCase().includes(p),A=_.barcode?_.barcode.toLowerCase().includes(p):!1,M=_.sku?_.sku.toLowerCase().includes(p):!1;return f||A||M}):[]});Ee(m,p=>{if(p&&v.value.length===1){const _=v.value[0];e("toggleProduct",_),m.value=""}});function O(p){e("toggleProduct",p),m.value=""}return Un(async()=>{u.fetchItems()}),(p,_)=>(d(),h("div",null,[t.showGrid?w("",!0):(d(),h("div",$s,[a("div",Os,[a("button",{onClick:_[0]||(_[0]=f=>o("category")),class:ie([{"bg-blue-500 text-white":n.value==="category","bg-gray-300 text-black":n.value!=="category"},"px-4 py-2 rounded-lg text-lg mr-2"])}," Open by Category ",2),a("button",{onClick:_[1]||(_[1]=f=>o("product")),class:ie([{"bg-blue-500 text-white":n.value==="product","bg-gray-300 text-black":n.value!=="product"},"px-4 py-2 rounded-lg text-lg"])}," Open by Product ",2)]),n.value==="product"&&!P(u).isLoading?(d(),h("div",Ss,[(d(!0),h(G,null,X(R.value,f=>(d(),h("button",{key:f,onClick:A=>c.value=f,class:ie([{"bg-blue-500 text-white":c.value===f,"bg-gray-300 text-black":c.value!==f},"px-4 py-2 rounded-lg text-lg mx-1 inline-block"])},b(f),11,Cs))),128))])):w("",!0)])),t.showGrid?(d(),h("div",ks,[T(a("input",{type:"text","onUpdate:modelValue":_[2]||(_[2]=f=>m.value=f),placeholder:"Enter item name, sku code or scan barcode...",class:"w-full p-2 border rounded"},null,512),[[I,m.value]]),v.value.length?(d(),h("div",Ps,[(d(!0),h(G,null,X(v.value,f=>(d(),h("div",{key:f.id,class:"p-2 hover:bg-gray-100 cursor-pointer",onClick:A=>O(f)},b(f.name),9,As))),128))])):w("",!0)])):w("",!0),t.showGrid?(d(),h("div",Ts,[a("div",Is,[Q(pr,{cart:t.cart,discountAllItemsPercent:t.discountAllItemsPercent,discountEntireSale:t.discountEntireSale,subTotalBeforeGlobalDiscount:t.subTotalBeforeGlobalDiscount,totalCartAmount:t.totalCartAmount,onOpenItemPriceModal:_[3]||(_[3]=f=>p.$emit("openItemPriceModal",f)),onOpenItemDiscountModal:_[4]||(_[4]=f=>p.$emit("openItemDiscountModal",f)),onRemoveFromCart:_[5]||(_[5]=f=>p.$emit("removeFromCart",f)),"onUpdate:discountAllItemsPercent":_[6]||(_[6]=f=>p.$emit("update:discountAllItemsPercent",f)),"onUpdate:discountEntireSale":_[7]||(_[7]=f=>p.$emit("update:discountEntireSale",f))},null,8,["cart","discountAllItemsPercent","discountEntireSale","subTotalBeforeGlobalDiscount","totalCartAmount"])])])):w("",!0),t.showGrid?w("",!0):(d(),h("div",Rs,[n.value==="category"?(d(),h(G,{key:0},[t.singleGlobalSingleMatch?(d(),h("div",Ms,[a("div",{class:ie(["p-4 bg-white rounded shadow cursor-pointer hover:shadow-lg flex flex-col items-center",{"bg-red-100":t.isInCart(t.singleGlobalSingleMatch)}]),onClick:_[8]||(_[8]=f=>p.$emit("toggleProduct",t.singleGlobalSingleMatch))},[a("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.singleGlobalSingleMatch.name)}`,alt:"Product Image",class:"w-16 h-16 rounded-full mb-2"},null,8,Ds),a("h3",Bs,b(t.singleGlobalSingleMatch.name),1),a("p",Ns,"₱"+b(t.singleGlobalSingleMatch.price.toFixed(2)),1)],2)])):(d(),K(On,{key:1,name:"fade",tag:"div",class:"grid grid-cols-2 md:grid-cols-3 gap-2"},{default:Je(()=>[t.visibleSubcategories.length?(d(!0),h(G,{key:0},X(t.visibleSubcategories,f=>(d(),h("div",{key:f.name,class:"p-4 bg-white rounded shadow cursor-pointer hover:shadow-lg text-center",onClick:A=>p.$emit("selectCategory",f)},[a("h2",js,b(f.name),1)],8,Ls))),128)):w("",!0),t.filteredProducts.length?(d(!0),h(G,{key:1},X(t.filteredProducts,f=>(d(),h("div",{key:f.id,class:ie(["p-4 bg-white rounded shadow cursor-pointer hover:shadow-lg flex flex-col items-center",{"bg-red-100":t.isInCart(f)}]),onClick:A=>p.$emit("toggleProduct",f)},[f.image?(d(),h("img",{key:0,src:f.image,alt:"Product Image",class:"w-16 h-16 rounded-full mb-2"},null,8,Fs)):(d(),h("img",{key:1,src:`https://ui-avatars.com/api/?name=${encodeURIComponent(f.name)}`,alt:"Product Image",class:"w-16 h-16 rounded-full mb-2"},null,8,Us)),a("h3",qs,b(f.name),1),a("p",Vs,"₱"+b(f.price.toFixed(2)),1)],10,Gs))),128)):w("",!0),t.currentCategory?w("",!0):(d(!0),h(G,{key:2},X(t.filteredCategories,f=>(d(),h("div",{key:f.name,class:"p-4 bg-white rounded shadow cursor-pointer hover:shadow-lg text-center",onClick:A=>p.$emit("selectCategory",f)},[a("h2",Hs,b(f.name),1)],8,zs))),128)),t.searchQuery&&!t.filteredCategories.length&&!t.filteredProducts.length&&!t.visibleSubcategories.length?(d(),h("div",Xs,' No results found for "'+b(t.searchQuery)+'" ',1)):w("",!0)]),_:1}))],64)):n.value==="product"?(d(),h(G,{key:1},[P(u).isLoading?(d(),h("div",Qs," Loading products... ")):(d(),h("div",Ws,[Q(On,{name:"fade",tag:"div",class:"grid grid-cols-2 md:grid-cols-3 gap-2"},{default:Je(()=>[(d(!0),h(G,null,X(y.value,f=>(d(),h("div",{key:f.id,class:ie(["p-4 bg-white rounded shadow cursor-pointer hover:shadow-lg flex flex-col items-center",{"bg-red-100":t.isInCart(f)}]),onClick:A=>p.$emit("toggleProduct",f)},[f.image?(d(),h("img",{key:0,src:f.image,alt:"Product Image",class:"w-16 h-16 rounded-full mb-2"},null,8,Ys)):(d(),h("img",{key:1,src:`https://ui-avatars.com/api/?name=${encodeURIComponent(f.name)}`,alt:"Product Image",class:"w-16 h-16 rounded-full mb-2"},null,8,Zs)),a("h3",Ks,b(f.name),1),a("p",ed,"₱"+b(Number(f.price).toFixed(2)),1)],10,Js))),128)),t.searchQuery&&y.value.length===0?(d(),h("div",td,' No results found for "'+b(t.searchQuery)+'" ',1)):w("",!0)]),_:1})]))],64)):w("",!0)]))]))}},rd=Ye(nd,[["__scopeId","data-v-63a64b0f"]]);const ne=t=>($t("data-v-2d5878ca"),t=t(),Ot(),t),od={class:"mb-4"},ad=ne(()=>a("h2",{class:"text-xl font-bold mb-2"},"Customer",-1)),id={class:"flex items-center space-x-2"},ud={class:"relative w-full"},ld={key:0,class:"absolute z-10 bg-white border rounded mt-1 w-full text-base max-h-40 overflow-y-auto"},cd=["onClick"],sd={key:0},dd={class:"mt-6"},fd=ne(()=>a("h2",{class:"text-xl font-bold mb-3"},"Payment",-1)),hd={class:"mb-4"},vd=ne(()=>a("label",{class:"block text-lg font-medium mb-2"},"Payment Type",-1)),md={class:"flex flex-wrap gap-2"},_d=["onClick"],pd={class:"mb-4"},gd=ne(()=>a("label",{class:"block text-lg font-medium mb-2"},"Amount Due",-1)),bd=["value"],yd={key:0,class:"mb-4"},xd=ne(()=>a("label",{class:"block text-lg font-medium mb-2"},"Check Number",-1)),wd=ne(()=>a("label",{class:"block text-lg font-medium mb-2 mt-3"},"Bank Name",-1)),Ed={key:1,class:"mb-4"},$d=ne(()=>a("label",{class:"block text-lg font-medium mb-2"},"E-Wallet Ref/Code",-1)),Od={key:2,class:"mb-4"},Sd=ne(()=>a("label",{class:"block text-lg font-medium mb-2"},"Transaction/Auth Code",-1)),Cd={key:3,class:"mb-4"},kd=ne(()=>a("label",{class:"block text-lg font-medium mb-2"},"Bank Ref",-1)),Pd={__name:"CartSidebar",props:{cart:Array,customerName:String,filteredCustomers:Array,discountAllItemsPercent:Number,discountEntireSale:Number,totalCartAmount:Number,paymentTypes:Array,selectedPaymentType:String,amountDue:Number,checkNumber:String,bankName:String,walletReference:String,cardAuthCode:String,bankReference:String,subTotalBeforeGlobalDiscount:Number,showCartTable:{type:Boolean,default:!0}},emits:["update:customerName","update:discountAllItemsPercent","update:discountEntireSale","update:selectedPaymentType","update:checkNumber","update:bankName","update:walletReference","update:cardAuthCode","update:bankReference","filterCustomers","selectCustomer","openCustomerModal","openItemPriceModal","openItemDiscountModal","removeFromCart","checkout","suspendSale","cancelSale","openSalesModal"],setup(t,{emit:e}){const r=t,n=C({get:()=>r.customerName,set:y=>e("update:customerName",y)}),o=C({get:()=>r.selectedPaymentType,set:y=>e("update:selectedPaymentType",y)}),u=C({get:()=>r.checkNumber,set:y=>e("update:checkNumber",y)}),l=C({get:()=>r.bankName,set:y=>e("update:bankName",y)}),c=C({get:()=>r.walletReference,set:y=>e("update:walletReference",y)}),$=C({get:()=>r.cardAuthCode,set:y=>e("update:cardAuthCode",y)}),R=C({get:()=>r.bankReference,set:y=>e("update:bankReference",y)});return(y,m)=>(d(),h("div",{class:ie(`cart-sidebar bg-white shadow-lg p-4 border-l w-full md:sticky md:top-0 transition-all duration-300 ${t.showCartTable?"md:w-1/5":"md:w-2/5"}`)},[a("div",od,[ad,a("div",id,[a("div",ud,[T(a("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>n.value=v),type:"text",placeholder:"Customer",class:"w-full p-2 border rounded text-base",onInput:m[1]||(m[1]=v=>y.$emit("filterCustomers"))},null,544),[[I,n.value]]),t.filteredCustomers&&t.filteredCustomers.length?(d(),h("ul",ld,[(d(!0),h(G,null,X(t.filteredCustomers,v=>(d(),h("li",{key:v.id,class:"p-2 hover:bg-gray-100 cursor-pointer",onClick:O=>y.$emit("selectCustomer",v)},b(v.first_name)+" "+b(v.last_name),9,cd))),128))])):w("",!0)]),a("button",{onClick:m[2]||(m[2]=v=>y.$emit("openCustomerModal")),class:"py-2 px-4 text-white rounded-lg hover:bg-red-700 bg-red-600"},[Q(we,{path:P(Kr),size:"18"},null,8,["path"])])])]),t.showCartTable?w("",!0):(d(),h("div",sd,[Q(pr,{cart:t.cart,discountAllItemsPercent:t.discountAllItemsPercent,discountEntireSale:t.discountEntireSale,subTotalBeforeGlobalDiscount:t.subTotalBeforeGlobalDiscount,totalCartAmount:t.totalCartAmount,onOpenItemPriceModal:m[3]||(m[3]=v=>y.$emit("openItemPriceModal",v)),onOpenItemDiscountModal:m[4]||(m[4]=v=>y.$emit("openItemDiscountModal",v)),onRemoveFromCart:m[5]||(m[5]=v=>y.$emit("removeFromCart",v)),"onUpdate:discountAllItemsPercent":m[6]||(m[6]=v=>y.$emit("update:discountAllItemsPercent",v)),"onUpdate:discountEntireSale":m[7]||(m[7]=v=>y.$emit("update:discountEntireSale",v))},null,8,["cart","discountAllItemsPercent","discountEntireSale","subTotalBeforeGlobalDiscount","totalCartAmount"])])),a("div",dd,[fd,a("div",hd,[vd,a("div",md,[(d(!0),h(G,null,X(t.paymentTypes,v=>(d(),h("button",{key:v,onClick:O=>o.value=v,class:ie(["py-2 px-4 border rounded-lg text-center text-lg min-w-[100px]",o.value===v?"bg-[#b51919] text-white border-[#b51919]":"bg-gray-200 text-gray-800 border-gray-300"])},b(v),11,_d))),128))])]),a("div",pd,[gd,a("input",{type:"number",class:"p-2 border rounded w-full text-lg",value:t.amountDue,min:"0",step:"0.01",readonly:""},null,8,bd)]),o.value==="Check"?(d(),h("div",yd,[xd,T(a("input",{type:"text",class:"w-full p-2 border rounded text-lg","onUpdate:modelValue":m[8]||(m[8]=v=>u.value=v),placeholder:"Enter check number"},null,512),[[I,u.value]]),wd,T(a("input",{type:"text",class:"w-full p-2 border rounded text-lg","onUpdate:modelValue":m[9]||(m[9]=v=>l.value=v),placeholder:"Enter bank name"},null,512),[[I,l.value]])])):o.value==="E-Wallet"?(d(),h("div",Ed,[$d,T(a("input",{type:"text",class:"w-full p-2 border rounded text-lg","onUpdate:modelValue":m[10]||(m[10]=v=>c.value=v),placeholder:"Enter e-wallet ref/code"},null,512),[[I,c.value]])])):o.value==="Credit Card"||o.value==="Debit Card"?(d(),h("div",Od,[Sd,T(a("input",{type:"text",class:"w-full p-2 border rounded text-lg","onUpdate:modelValue":m[11]||(m[11]=v=>$.value=v),placeholder:"Enter auth code"},null,512),[[I,$.value]])])):o.value==="Bank"?(d(),h("div",Cd,[kd,T(a("input",{type:"text",class:"w-full p-2 border rounded text-lg","onUpdate:modelValue":m[12]||(m[12]=v=>R.value=v),placeholder:"Enter bank ref"},null,512),[[I,R.value]])])):w("",!0),a("button",{onClick:m[13]||(m[13]=v=>y.$emit("checkout")),class:"w-full mt-4 py-3 px-6 bg-red-600 text-white rounded-lg text-lg hover:bg-red-700 font-bold"}," Checkout ")])],2))}},Ad=Ye(Pd,[["__scopeId","data-v-2d5878ca"]]),Td={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Id={class:"bg-white p-6 rounded-lg md:w-1/3 w-full max-w-md"},Rd=a("h2",{class:"text-xl font-bold mb-4"},"Add Customer",-1),Md=["onSubmit"],Dd={class:"mb-4"},Bd=a("label",{class:"block text-sm font-medium mb-1"},"First Name",-1),Nd={class:"mb-4"},Ld=a("label",{class:"block text-sm font-medium mb-1"},"Last Name",-1),jd={class:"mb-4"},Gd=a("label",{class:"block text-sm font-medium mb-1"},"Email",-1),Fd={class:"mb-4"},Ud=a("label",{class:"block text-sm font-medium mb-1"},"Phone",-1),qd={key:0,class:"mb-4 text-red-500 text-sm"},Vd={class:"flex justify-end gap-2"},zd=["disabled"],Hd=["disabled"],Xd={__name:"CustomerModal",emits:["saveCustomer","close"],setup(t,{emit:e}){const r=Vn(),n=qn({first_name:"",last_name:"",email:"",phone:""});async function o(){try{await r.createItem({...n}),e("saveCustomer",{...n}),r.error||e("close")}catch(u){console.error("Failed to save customer:",u)}}return(u,l)=>(d(),h("div",Td,[a("div",Id,[Rd,a("form",{onSubmit:yt(o,["prevent"])},[a("div",Dd,[Bd,T(a("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>n.first_name=c),type:"text",placeholder:"Customer First Name",class:"w-full p-2 border rounded",required:""},null,512),[[I,n.first_name]])]),a("div",Nd,[Ld,T(a("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>n.last_name=c),type:"text",placeholder:"Customer Last Name",class:"w-full p-2 border rounded",required:""},null,512),[[I,n.last_name]])]),a("div",jd,[Gd,T(a("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>n.email=c),type:"email",placeholder:"Customer Email",class:"w-full p-2 border rounded",required:""},null,512),[[I,n.email]])]),a("div",Fd,[Ud,T(a("input",{"onUpdate:modelValue":l[3]||(l[3]=c=>n.phone=c),type:"text",placeholder:"Customer Phone",class:"w-full p-2 border rounded",required:""},null,512),[[I,n.phone]])]),P(r).error?(d(),h("div",qd,b(P(r).error),1)):w("",!0),a("div",Vd,[a("button",{type:"button",onClick:l[4]||(l[4]=c=>e("close")),class:"p-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:P(r).isLoading}," Cancel ",8,zd),a("button",{type:"submit",class:"p-2 bg-[#b51919] text-white rounded hover:bg-[#a31818]",disabled:P(r).isLoading},b(P(r).isLoading?"Saving...":"Save"),9,Hd)])],40,Md)])]))}},Qd={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Wd={class:"bg-white p-6 rounded-lg md:w-1/3 w-full max-w-md"},Jd={class:"text-xl font-bold mb-4"},Yd={class:"mb-4 flex items-center gap-2"},Zd={class:"block text-sm font-medium"},Kd={class:"flex justify-end gap-2"},Gn={__name:"EditItemModal",props:{type:String,value:Number},emits:["save","close"],setup(t,{emit:e}){const r=t,n=x(r.value);Ee(()=>r.value,u=>{n.value=u});function o(){e("save",n.value)}return(u,l)=>(d(),h("div",Qd,[a("div",Wd,[a("h2",Jd,"Edit "+b(t.type==="discount"?"Discount":"Price"),1),a("div",Yd,[a("label",Zd,b(t.type==="discount"?"Discount Amount (₱):":"New Price (₱):"),1),T(a("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>n.value=c),type:"number",min:"0",step:"0.01",class:"p-2 border rounded flex-1"},null,512),[[I,n.value,void 0,{number:!0}]])]),a("div",Kd,[a("button",{type:"button",onClick:l[1]||(l[1]=c=>u.$emit("close")),class:"p-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," ✘ "),a("button",{type:"button",onClick:o,class:"p-2 bg-[#b51919] text-white rounded hover:bg-[#a31818]"}," ✓ ")])])]))}},ef={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},tf={class:"bg-white p-6 rounded-lg md:w-2/3 w-full max-w-6xl max-h-[80vh] overflow-y-auto"},nf={class:"flex flex-wrap md:flex-nowrap justify-between items-center mb-4"},rf=a("h2",{class:"text-xl font-bold"},"All Sales",-1),of={class:"flex flex-wrap gap-2 mb-4"},af={class:"flex items-center gap-1"},uf=a("label",{class:"text-sm"},"From:",-1),lf={class:"flex items-center gap-1"},cf=a("label",{class:"text-sm"},"To:",-1),sf={class:"flex gap-2"},df=["onClick"],ff=["onClick"],hf=["onClick"],vf={__name:"SalesModal",emits:["close","unsuspendSale","voidSale","printSale","edit"],setup(t,{emit:e}){const r=x(""),n=x(""),o=x(""),u=zn();async function l(f,A=!1){await u.fetchItems(f,A)}l({page:1,limit:5});const c=C(()=>({total:u.items.total,totalPages:u.items.totalPages,currentPage:u.items.currentPage,pageSize:u.items.pageSize,data:u.items.data}));function $(f){return f?new Date(f).toLocaleString():""}const R=[{key:"id",label:"ID",sortable:!0},{key:"created_at",label:"Date",formatter:f=>$(f),sortable:!0},{key:"customer_name",label:"Customer",sortable:!0,filterable:!0},{key:"status",label:"Status",sortable:!0,filterable:!0},{key:"payment_type",label:"Type",sortable:!0,filterable:!0},{key:"total_amount",label:"Total",formatter:f=>`₱${(Number(f)||0).toFixed(2)}`,sortable:!0}];Ee([r,n,o],()=>{const f={page:1,limit:5,filters:{search:r.value,start_date:n.value,end_date:o.value}};l(f,!0)});const y=async f=>{await l(f,!0)};function m(f){e("edit",f)}function v(f){e("unsuspendSale",f)}function O(f){e("voidSale",f)}function p(f){e("printSale",f)}function _(){e("close")}return(f,A)=>(d(),h("div",ef,[a("div",tf,[P(u).error?(d(),K(io,{key:0,icon:P(eo),color:"danger"},{default:Je(()=>[ee(b(P(u).error),1)]),_:1},8,["icon"])):w("",!0),a("div",nf,[rf,a("button",{type:"button",onClick:_,class:"p-2 bg-red-500 text-white rounded hover:bg-red-600"},[Q(we,{path:P(to),size:"16"},null,8,["path"])])]),a("div",of,[T(a("input",{"onUpdate:modelValue":A[0]||(A[0]=M=>r.value=M),type:"text",placeholder:"Search by ID, Customer Name, etc.",class:"p-2 border rounded flex-1"},null,512),[[I,r.value]]),a("div",af,[uf,T(a("input",{"onUpdate:modelValue":A[1]||(A[1]=M=>n.value=M),type:"date",class:"p-1 border rounded"},null,512),[[I,n.value]])]),a("div",lf,[cf,T(a("input",{"onUpdate:modelValue":A[2]||(A[2]=M=>o.value=M),type:"date",class:"p-1 border rounded"},null,512),[[I,o.value]])])]),Q(ao,{columns:R,data:c.value,checkable:!1,loading:P(u).isLoading,onQueryChange:y,onEdit:m},{"cell-actions":Je(({row:M})=>[a("div",sf,[M.status==="suspended"?(d(),h("button",{key:0,onClick:B=>v(M),class:"px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700"}," Unsuspend ",8,df)):w("",!0),M.status!=="voided"?(d(),h("button",{key:1,onClick:B=>O(M),class:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700"}," Void ",8,ff)):w("",!0),a("button",{onClick:B=>p(M),class:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700"}," Print ",8,hf)])]),_:1},8,["data","loading"])])]))}};const _e=t=>($t("data-v-7b03d7fc"),t=t(),Ot(),t),mf={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},_f={class:"bg-white p-6 rounded-lg md:w-1/3 w-full max-w-md",id:"receiptContainer"},pf=_e(()=>a("h2",{class:"text-xl font-bold mb-4"},"Transaction Receipt",-1)),gf=_e(()=>a("strong",null,"Transaction ID:",-1)),bf=_e(()=>a("div",{class:"my-4 text-center"},[a("svg",{id:"barcodeElement"})],-1)),yf={class:"text-sm mb-4"},xf=_e(()=>a("strong",null,"Customer:",-1)),wf=_e(()=>a("strong",null,"Payment Type:",-1)),Ef=_e(()=>a("strong",null,"Amount Due:",-1)),$f=_e(()=>a("strong",null,"Status:",-1)),Of={key:0,class:"font-mono text-xs mb-4"},Sf=Xr('<div class="flex border-b pb-1" data-v-7b03d7fc><div class="w-40" data-v-7b03d7fc>Item</div><div class="w-16 text-right" data-v-7b03d7fc>Qty</div><div class="w-24 text-right" data-v-7b03d7fc>Price</div><div class="w-24 text-right" data-v-7b03d7fc>Disc</div><div class="w-24 text-right" data-v-7b03d7fc>Total</div></div>',1),Cf={class:"w-40 truncate"},kf={class:"w-16 text-right"},Pf={class:"w-24 text-right"},Af={class:"w-24 text-right"},Tf={class:"w-24 text-right"},If={class:"text-lg font-bold mb-4"},Rf={class:"flex justify-end gap-2 no-print"},Mf={type:"button",class:"p-2 bg-[#b51919] text-white rounded hover:bg-[#a31818]"},Df={__name:"ReceiptModal",props:{transactionId:String,receiptData:Object,printOptions:Object},setup(t){return(e,r)=>{const n=Hr("print");return d(),h("div",mf,[a("div",_f,[pf,a("p",null,[gf,ee(" "+b(t.transactionId),1)]),bf,a("div",yf,[a("p",null,[xf,ee(" "+b(t.receiptData.customerName||"N/A"),1)]),a("p",null,[wf,ee(" "+b(t.receiptData.paymentType),1)]),a("p",null,[Ef,ee(" ₱"+b(t.receiptData.total),1)]),a("p",null,[$f,ee(" "+b(t.receiptData.status),1)])]),t.receiptData.items&&t.receiptData.items.length?(d(),h("div",Of,[Sf,(d(!0),h(G,null,X(t.receiptData.items,o=>{var u;return d(),h("div",{key:o.id,class:"flex"},[a("div",Cf,b(((u=o.item)==null?void 0:u.name)??o.name),1),a("div",kf,b(o.quantity),1),a("div",Pf,"₱"+b(o.price),1),a("div",Af,"₱"+b(o.discount),1),a("div",Tf,"₱"+b((o.price-o.discount)*o.quantity),1)])}),128))])):w("",!0),a("p",If,"Grand Total: ₱"+b(t.receiptData.total),1),a("div",Rf,[T((d(),h("button",Mf,[ee(" Print ")])),[[n,t.printOptions]]),a("button",{type:"button",onClick:r[0]||(r[0]=o=>e.$emit("close")),class:"p-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," Close ")])])])}}},Bf=Ye(Df,[["__scopeId","data-v-7b03d7fc"]]);const rn=t=>($t("data-v-a670b9d8"),t=t(),Ot(),t),Nf={class:"pos-page bg-[#f8f8f8] min-h-screen flex flex-col"},Lf={key:0,class:"loading-screen flex flex-col items-center justify-center h-screen"},jf=rn(()=>a("h1",{class:"text-3xl font-bold"},"Loading...",-1)),Gf=[jf],Ff={key:1},Uf={key:0,class:"start-menu flex flex-col items-center justify-center h-screen"},qf={class:"mb-8 text-center"},Vf=rn(()=>a("h1",{class:"text-4xl font-bold"},"Welcome to the POS System",-1)),zf={class:"text-xl mt-2"},Hf={class:"text-xl mt-2 text-blue-500"},Xf={key:1,class:"pos-ui flex flex-col"},Qf={class:"bg-white shadow-md p-6 flex items-center justify-between"},Wf=rn(()=>a("h2",{class:"text-2xl font-semibold text-gray-800"},"Transaction In Progress",-1)),Jf={class:"text-sm text-gray-500"},Yf={class:"text-sm text-gray-500"},Zf={class:"flex items-center space-x-3"},Kf={class:"w-full mx-auto py-8 flex-1 flex flex-col md:flex-row p-4 md:p-8"},e1={class:"flex-1"},t1={key:0},n1={key:0,class:"mb-4"},r1={class:"text-2xl font-bold mb-4"},o1={class:"mb-6"},a1={__name:"POSView",setup(t){const e=Qr.useLoading(),r=uo(),n=Vn(),o=zn(),u=lo(),l=co(),c=Wr();r.showAllItems(),n.fetchItems();const $=x(!1),R=x(!0),y=x(null);x(null);const m=async()=>{$.value=!0;try{const{value:i}=await k.fire({title:"Enter Opening Cash Amount",input:"number",inputLabel:"Opening Cash Amount",inputPlaceholder:"Enter amount (e.g., 100.00)",inputAttributes:{min:0,step:"0.01"},showCancelButton:!0,confirmButtonText:"Start Transaction",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});if(i===void 0||i===""){$.value=!1;return}const s={userId:1,branchId:1,start_time:new Date,status:"open",opening_cash_amount:i},g=await u.createItem(s);y.value=g,k.fire({title:"Transaction Started",text:"New transaction has been started.",icon:"success",confirmButtonColor:"#3085d6"})}catch(i){k.fire({title:"Error",text:(i==null?void 0:i.message)||"Failed to start transaction.",icon:"error",confirmButtonColor:"#b51919"})}finally{$.value=!1}},v=async()=>{if(y.value){$.value=!0;try{const{value:i}=await k.fire({title:"Enter Closing Cash Amount",input:"number",inputLabel:"Closing Cash Amount",inputPlaceholder:"Enter amount (e.g., 150.00)",inputAttributes:{min:0,step:"0.01"},showCancelButton:!0,confirmButtonText:"End Transaction",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});if(i===void 0||i===""){$.value=!1;return}const s=await o.getTotalForShift(y.value.id);await u.updateItem(y.value.id,{end_time:new Date,status:"closed",closing_cash_amount:i,cash_sales_total:s}),y.value=null,k.fire({title:"Transaction Ended",text:"The current transaction has been ended.",icon:"success",confirmButtonColor:"#3085d6"}),Me()}catch(i){k.fire({title:"Error",text:(i==null?void 0:i.message)||"Failed to end transaction.",icon:"error",confirmButtonColor:"#b51919"})}finally{$.value=!1}}},O=()=>{k.fire({title:"Close POS",text:"Are you sure you want to close the POS?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(i=>{i.isConfirmed&&window.close()})},p=async()=>{if(!y.value){k.fire({title:"Error",text:"No active shift found.",icon:"error",confirmButtonColor:"#b51919"});return}const{value:i}=await k.fire({title:"Add Cash",input:"number",inputLabel:"Enter cash amount to add",inputPlaceholder:"e.g., 50.00",inputAttributes:{min:0,step:"0.01"},showCancelButton:!0,confirmButtonText:"Add",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});if(!(i===void 0||i===""))try{await l.createItem({shift_id:y.value.id,cash:Number(i),type:"in",remarks:"Cash added manually"}),k.fire({title:"Cash Added",text:`Successfully added ₱${Number(i).toFixed(2)} to the register.`,icon:"success",confirmButtonColor:"#3085d6"})}catch(s){k.fire({title:"Error",text:(s==null?void 0:s.message)||"Failed to add cash.",icon:"error",confirmButtonColor:"#b51919"})}},_=async()=>{if(!y.value){k.fire({title:"Error",text:"No active shift found.",icon:"error",confirmButtonColor:"#b51919"});return}const{value:i}=await k.fire({title:"Remove Cash",input:"number",inputLabel:"Enter cash amount to remove",inputPlaceholder:"e.g., 50.00",inputAttributes:{min:0,step:"0.01"},showCancelButton:!0,confirmButtonText:"Remove",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});if(!(i===void 0||i===""))try{await l.createItem({shift_id:y.value.id,cash:Number(i),type:"out",remarks:"Cash removed manually"}),k.fire({title:"Cash Removed",text:`Successfully removed ₱${Number(i).toFixed(2)} from the register.`,icon:"success",confirmButtonColor:"#3085d6"})}catch(s){k.fire({title:"Error",text:(s==null?void 0:s.message)||"Failed to remove cash.",icon:"error",confirmButtonColor:"#b51919"})}},f=()=>{k.fire({title:"Cash Drawer Command Sent",text:"The cash drawer has been opened.",icon:"success",confirmButtonColor:"#3085d6"}).then(()=>{window.print()})},A=x(new Date().toLocaleString());let M=null;Un(async()=>{M=setInterval(()=>{A.value=new Date().toLocaleString()},1e3);try{await u.fetchItems({filters:{userId:1,status:"open"}}),u.items.data.length>0&&(y.value=u.items.data[0])}catch(i){console.error("Error checking existing shift:",i)}finally{R.value=!1}}),Jr(()=>{M&&clearInterval(M)});const B=x([]),W=x(null),z=x(""),D=x([]),ce=x([]),qe=x([]);Ee(()=>{var i,s;return(s=(i=r.items)==null?void 0:i.data)==null?void 0:s.categories},i=>{ce.value=i||[]},{immediate:!0}),Ee(()=>{var i;return(i=n.items)==null?void 0:i.data},i=>{qe.value=i||[]},{immediate:!0});const pe=x(!0);function gr(){pe.value=!pe.value}const lt=x(!1),on=x(""),Y=x(""),Ve=x([]),ct=x(!1),re=x(0),Z=x(0),br=x(["Cash","Check","Debit Card","Credit Card","E-Wallet","Bank"]),se=x(""),an=C(()=>ge.value),Pe=x(""),Ae=x(""),Te=x(""),Ie=x(""),Re=x(""),st=x(!1),dt=x(!1),ft=x(!1),un=x(""),oe=x(-1),ln=x(0),cn=x(0),ae=qn({id:"",date:"",customerName:"",items:[],total:0,paymentType:"",status:""}),yr={id:"receiptContainer",style:`
    @page { size: A4; margin: 20mm; }
    @media print {
      .no-print { display: none !important; }
      html, body { margin: 0; padding: 0; width: 210mm; }
      #receiptContainer { width: 100%; margin: 0 auto; }
      table { width: 100%; border-collapse: collapse; }
      thead { display: table-header-group; }
      tfoot { display: table-footer-group; }
      tr { page-break-inside: avoid; }
      th, td { border: 1px solid #ddd; padding: 8px; text-align: left; vertical-align: middle; }
    }
  `},xr=C(()=>{const i=z.value.trim().toLowerCase();if(!i||Or(i))return null;const s=[],g=E=>{var de,U;(de=E.products)!=null&&de.length&&s.push(...E.products),(U=E.subcategories)!=null&&U.length&&E.subcategories.forEach(g)};ce.value.forEach(g);const H=s.filter(E=>E.name.toLowerCase().includes(i));return H.length===1?H[0]:null}),wr=C(()=>{if(!z.value)return ce.value;const i=z.value.toLowerCase();return ce.value.filter(s=>sn(s,i))}),Er=C(()=>{var E,de;if(!W.value&&!z.value)return[];const i=dn();if(!i)return[];let s=((E=i.products)==null?void 0:E.slice())||[];(de=i.subcategories)!=null&&de.length&&i.subcategories.forEach(U=>{var $n;($n=U.products)!=null&&$n.length&&(s=s.concat(U.products))});const g=Array.from(new Map(s.map(U=>[U.id,U])).values());if(!z.value)return g;const H=z.value.toLowerCase();return g.filter(U=>U.name.toLowerCase().includes(H))}),$r=C(()=>{const i=dn();if(!i||!i.subcategories)return[];const s=z.value.toLowerCase();return i.subcategories.filter(g=>g.name.toLowerCase().includes(s))}),ht=C(()=>D.value.reduce((i,s)=>i+(s.price-s.discount)*s.quantity,0)),ge=C(()=>{let i=ht.value;return re.value>0&&(i*=1-re.value/100),Z.value>0&&(i-=Z.value),i<0?0:i});function Or(i){const s=g=>{var H;return g.name.toLowerCase().includes(i)?!0:(H=g.subcategories)!=null&&H.length?g.subcategories.some(s):!1};return ce.value.some(s)}function sn(i,s){return i.name.toLowerCase().includes(s)||i.products&&i.products.some(g=>g.name.toLowerCase().includes(s))||i.subcategories&&i.subcategories.some(g=>sn(g,s))}function dn(){let i=ce.value,s=null;for(const g of B.value){if(s=i.find(H=>H.name===g),!s)return{};i=s.subcategories||[]}return s||{}}function Sr(i){B.value.push(i.name),W.value=i.name}function Cr(){B.value.pop(),W.value=B.value[B.value.length-1]||null}function kr(i){B.value.splice(i+1),W.value=B.value[B.value.length-1]||null}function Pr(){B.value=[],W.value=null}const ze=x(!1);function Ar(){document.fullscreenElement?document.exitFullscreen().then(()=>{ze.value=!1}).catch(i=>{console.error("Error attempting to exit full-screen mode:",i)}):document.documentElement.requestFullscreen().then(()=>{ze.value=!0}).catch(i=>{console.error("Error attempting to enable full-screen mode:",i)})}document.addEventListener("fullscreenchange",()=>{ze.value=!!document.fullscreenElement});function fn(){Me()}function hn(){mn("suspend")}function Tr(i){return D.value.some(s=>s.id===i.id)}function Ir(i){const s=D.value.find(g=>g.id===i.id);s?s.quantity+=1:D.value.push({...i,quantity:1,discount:0})}function vn(i){D.value.splice(i,1)}async function mn(i="complete"){if(!se.value){k.fire({title:"Error",text:"Please select a payment type.",icon:"error",confirmButtonColor:"#b51919"});return}const s=e.show({isFullPage:!0,canCancel:!1,color:"#3b82f6",opacity:.8}),g=Date.now().toString(),H={user_id:1,branch_id:1,warehouse_id:1,shift_id:y.value.id,customer_id:on.value||null,customer_name:Y.value,status:i==="complete"?"completed":"suspended",sale_date:new Date().toISOString(),total_amount:ge.value,discount_total:Z.value||0,remarks:i==="complete"?"Sale transaction":"Suspended sale",payment_type:se.value,checkNumber:i==="complete"&&Pe.value||null,bankName:i==="complete"&&Ae.value||null,walletReference:i==="complete"&&Te.value||null,cardAuthCode:i==="complete"&&Ie.value||null,bankReference:i==="complete"&&Re.value||null,items:D.value.map(E=>({item_id:E.id,price:E.price,quantity:E.quantity,discount:E.discount,total:(E.price-E.discount)*E.quantity}))};try{const E=await o.createItem(H);if(!E||E.error)throw new Error((E==null?void 0:E.error)||"Unknown error occurred");s.hide();const de=i==="complete"?"Checkout successful!":"Sale suspended!",U=i==="complete"?`
        <div style="text-align: left">
          <p><strong>Payment:</strong> ${se.value}</p>
          <p><strong>Due:</strong> ₱${an.value.toFixed(2)}</p>
          <p><strong>Cart:</strong> ₱${ge.value.toFixed(2)}</p>
        </div>
      `:`
        <div style="text-align: left">
          <p><strong>Cart Total:</strong> ₱${ge.value.toFixed(2)}</p>
          <p>This sale has been suspended and can be resumed later.</p>
        </div>
      `;k.fire({title:de,html:U,icon:"success",confirmButtonColor:"#b51919"}).then(()=>{i==="complete"&&(un.value=g,yn(E)),Me()})}catch(E){s.hide(),console.error("Checkout error:",E),k.fire({title:"Checkout Failed",text:E.message||"An error occurred while processing your sale.",icon:"error",confirmButtonColor:"#b51919"})}}function _n(i){oe.value=i,ln.value=D.value[i].discount||0,st.value=!0}function pn(){st.value=!1,oe.value=-1}function Rr(i){oe.value>=0&&(D.value[oe.value].discount=i),pn()}function gn(i){oe.value=i,cn.value=D.value[i].price||0,dt.value=!0}function bn(){dt.value=!1,oe.value=-1}function Mr(i){oe.value>=0&&(D.value[oe.value].price=i),bn()}async function yn(i){ae.id=i.id,ae.date=i.sale_date,ae.customerName=i.customer_name,ae.items=i.saleItems||D.value,ae.total=i.total_amount,ae.paymentType=i.payment_type,ae.status=i.status,ft.value=!0,await Fn();const s=document.getElementById("barcodeElement");s&&zc(s,i.id,{format:"CODE128",lineColor:"#000",width:2,height:40,displayValue:!1})}function Dr(){ft.value=!1,Me()}function Me(){D.value=[],z.value="",B.value=[],W.value=null,re.value=0,Z.value=0,Y.value="",se.value="",Pe.value="",Ae.value="",Te.value="",Ie.value="",Re.value=""}function Br(){ct.value=!0}function xn(){ct.value=!1}function Nr(i){i.name&&(qe.value.push({...i,id:qe.value.length+1}),Y.value=i.name),xn()}function Lr(){if(Y.value){const i=Y.value.toLowerCase();Ve.value=qe.value.filter(s=>`${s.first_name} ${s.last_name}`.toLowerCase().includes(i))}else Ve.value=[]}function jr(i){on.value=i.id,Y.value=`${i.first_name} ${i.last_name}`,Ve.value=[]}function wn(){lt.value=!0}function En(){lt.value=!1}function Gr(i){Me(),console.log(i.saleItems),D.value=i.saleItems.map(s=>({...s,id:s.item_id,name:s.item.name,price:Number(s.price)||0,discount:Number(s.discount)||0})),Y.value=i.customerName,re.value=i.discountAllItemsPercent,Z.value=i.discountEntireSale,se.value=i.payment_type,Pe.value=i.checkNumber,Ae.value=i.bankName,Te.value=i.walletReference,Ie.value=i.cardAuthCode,Re.value=i.bankReference,i.status="Re-Opened",o.updateItem(i.id,{status:i.status}),k.fire({title:"Sale Unsuspended",text:`Loaded sale #${i.id} back into the cart.`,icon:"success",confirmButtonColor:"#b51919"}),En()}function Fr(i){i.status="voided",o.updateItem(i.id,{status:i.status}),k.fire({title:"Sale Voided",text:`Sale #${i.id} is now voided.`,icon:"success",confirmButtonColor:"#b51919"})}function Ur(i){yn(i)}function qr(i){}function Vr(i){return new Date(i).toLocaleString()}return(i,s)=>(d(),h("div",Nf,[R.value||$.value?(d(),h("div",Lf,Gf)):(d(),h("div",Ff,[y.value?(d(),h("div",Xf,[a("header",Qf,[a("div",null,[Wf,a("p",Jf," Started at: "+b(Vr(y.value.start_time)),1),a("p",Yf," User: "+b(P(c).user.first_name)+" "+b(P(c).user.last_name),1)]),a("div",Zf,[a("button",{onClick:Ar,class:"flex items-center justify-center w-10 h-10 bg-gray-500 hover:bg-gray-600 text-white rounded-md transition duration-150"},[ze.value?(d(),K(we,{key:1,path:P(ro),size:"18"},null,8,["path"])):(d(),K(we,{key:0,path:P(no),size:"18"},null,8,["path"]))]),a("button",{onClick:gr,class:"px-4 py-2 bg-blue-500 text-white rounded-lg text-lg focus:outline-none"},b(pe.value?"Show Products":"Hide Products"),1),a("button",{onClick:p,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition duration-150 font-semibold"}," Add Cash "),a("button",{onClick:_,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition duration-150 font-semibold"}," Remove Cash "),a("button",{onClick:f,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition duration-150 font-semibold"}," Open Cash Drawer "),a("button",{onClick:wn,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition duration-150 font-semibold"}," Sales "),D.value.length>0?(d(),h("button",{key:0,onClick:hn,class:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md transition duration-150 font-semibold"}," Suspend ")):w("",!0),D.value.length>0?(d(),h("button",{key:1,onClick:fn,class:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-md transition duration-150 font-semibold"}," Cancel ")):w("",!0),a("button",{onClick:v,class:"flex items-center justify-center w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-md transition duration-150"},[Q(we,{path:P(oo),size:"18"},null,8,["path"])])])]),a("div",Kf,[a("div",e1,[pe.value?w("",!0):(d(),h("div",t1,[Q(Wc,{breadcrumbs:B.value,onReset:Pr,onNavigate:kr},null,8,["breadcrumbs"]),W.value?(d(),h("div",n1,[a("h2",{class:"text-lg font-bold text-[#b51919] cursor-pointer hover:underline flex items-center gap-2",onClick:Cr}," ← Back to Categories ")])):w("",!0),a("h1",r1,b(W.value?W.value:"All Categories"),1),a("div",o1,[T(a("input",{"onUpdate:modelValue":s[0]||(s[0]=g=>z.value=g),type:"text",placeholder:"Search categories or products...",class:"w-full p-2 border rounded"},null,512),[[I,z.value]])])])),Q(rd,{"show-grid":pe.value,searchQuery:z.value,categories:ce.value,currentCategory:W.value,breadcrumbs:B.value,singleGlobalSingleMatch:xr.value,filteredCategories:wr.value,filteredProducts:Er.value,visibleSubcategories:$r.value,isInCart:Tr,cart:D.value,discountAllItemsPercent:re.value,discountEntireSale:Z.value,subTotalBeforeGlobalDiscount:ht.value,totalCartAmount:ge.value,onSelectCategory:Sr,onToggleProduct:Ir,onOpenItemPriceModal:gn,onOpenItemDiscountModal:_n,onRemoveFromCart:vn,"onUpdate:discountAllItemsPercent":s[1]||(s[1]=g=>re.value=g),"onUpdate:discountEntireSale":s[2]||(s[2]=g=>Z.value=g)},null,8,["show-grid","searchQuery","categories","currentCategory","breadcrumbs","singleGlobalSingleMatch","filteredCategories","filteredProducts","visibleSubcategories","cart","discountAllItemsPercent","discountEntireSale","subTotalBeforeGlobalDiscount","totalCartAmount"])]),Q(Ad,{cart:D.value,customerName:Y.value,"onUpdate:customerName":s[3]||(s[3]=g=>Y.value=g),discountAllItemsPercent:re.value,"onUpdate:discountAllItemsPercent":s[4]||(s[4]=g=>re.value=g),discountEntireSale:Z.value,"onUpdate:discountEntireSale":s[5]||(s[5]=g=>Z.value=g),totalCartAmount:ge.value,paymentTypes:br.value,selectedPaymentType:se.value,"onUpdate:selectedPaymentType":s[6]||(s[6]=g=>se.value=g),amountDue:an.value,checkNumber:Pe.value,"onUpdate:checkNumber":s[7]||(s[7]=g=>Pe.value=g),bankName:Ae.value,"onUpdate:bankName":s[8]||(s[8]=g=>Ae.value=g),walletReference:Te.value,"onUpdate:walletReference":s[9]||(s[9]=g=>Te.value=g),cardAuthCode:Ie.value,"onUpdate:cardAuthCode":s[10]||(s[10]=g=>Ie.value=g),bankReference:Re.value,"onUpdate:bankReference":s[11]||(s[11]=g=>Re.value=g),subTotalBeforeGlobalDiscount:ht.value,filteredCustomers:Ve.value,showCartTable:pe.value,onFilterCustomers:Lr,onSelectCustomer:jr,onOpenCustomerModal:Br,onOpenItemPriceModal:gn,onOpenItemDiscountModal:_n,onRemoveFromCart:vn,onCheckout:mn,onSuspendSale:hn,onCancelSale:fn,onOpenSalesModal:wn},null,8,["cart","customerName","discountAllItemsPercent","discountEntireSale","totalCartAmount","paymentTypes","selectedPaymentType","amountDue","checkNumber","bankName","walletReference","cardAuthCode","bankReference","subTotalBeforeGlobalDiscount","filteredCustomers","showCartTable"])]),ct.value?(d(),K(Xd,{key:0,onSaveCustomer:Nr,onClose:xn})):w("",!0),st.value?(d(),K(Gn,{key:1,type:"discount",value:ln.value,onSave:Rr,onClose:pn},null,8,["value"])):w("",!0),dt.value?(d(),K(Gn,{key:2,type:"price",value:cn.value,onSave:Mr,onClose:bn},null,8,["value"])):w("",!0),lt.value?(d(),K(vf,{key:3,onClose:En,onUnsuspendSale:Gr,onVoidSale:Fr,onPrintSale:Ur,onEdit:qr})):w("",!0),ft.value?(d(),K(Bf,{key:4,transactionId:un.value,receiptData:ae,printOptions:yr,onClose:Dr},null,8,["transactionId","receiptData"])):w("",!0)])):(d(),h("div",Uf,[a("div",qf,[Vf,a("p",zf,b(A.value),1),a("p",Hf,b(P(c).user.first_name)+" "+b(P(c).user.last_name),1)]),a("div",{class:"flex space-x-4"},[a("button",{onClick:m,class:"px-6 py-3 bg-green-600 text-white rounded shadow hover:bg-green-700"}," Start New Transaction "),a("button",{onClick:O,class:"px-6 py-3 bg-red-600 text-white rounded shadow hover:bg-red-700"}," Close POS ")])]))]))]))}},w1=Ye(a1,[["__scopeId","data-v-a670b9d8"]]);export{w1 as default};
