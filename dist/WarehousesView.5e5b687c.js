import{a as d,s as T,b as m,l as w,f as r,e as f,i as e,B as b,C as _,m as v,F as $,h as n,c as y,v as U,t as j,S as g}from"./index.a2c9f28c.js";import{_ as A}from"./LayoutAuthenticatedX.d58fd7d8.js";import{_ as F}from"./SectionMain.8435c1f0.js";import{u as I}from"./warehouse.0c6d3805.js";import{_ as Q}from"./NotificationBar.caa84e93.js";import{B as Y}from"./BaseTable.a063d648.js";import{_ as P}from"./CardBox.25a3dc7a.js";import{_ as q}from"./SectionTitleLineWithButton.39476921.js";import{_ as x}from"./BaseButton.b8e12a74.js";import{p as z,c as G,u as H,v as J}from"./mdi.aa269c9f.js";import"./darkMode.b88882a1.js";import"./BaseIcon.ad3a4017.js";import"./FormControl.2759acc3.js";import"./FooterBar.948c11c8.js";import"./logo.c6f18b48.js";import"./BaseLevel.e0eed931.js";import"./TableCheckboxCell.8ab5003b.js";import"./BaseButtons.e7208c74.js";import"./_plugin-vue_export-helper.c27b6911.js";const K={class:"flex items-center gap-2"},O={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},R={class:"bg-white p-6 rounded shadow-lg w-96"},X=e("h2",{class:"text-xl mb-4"},"Add Warehouse",-1),Z={class:"mb-4"},ee=e("label",{class:"block mb-1",for:"warehouseName"},"Name",-1),ae={class:"mb-4"},oe=e("label",{class:"block mb-1",for:"warehouseLocation"},"Location",-1),te={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},se={class:"bg-white p-6 rounded shadow-lg w-96"},le=e("h2",{class:"text-xl mb-4"},"Edit Warehouse",-1),ne={class:"mb-4"},ie=e("label",{class:"block mb-1",for:"editWarehouseName"},"Name",-1),re={class:"mb-4"},ue=e("label",{class:"block mb-1",for:"editWarehouseLocation"},"Location",-1),De={__name:"WarehousesView",setup(ce){const h=d(!1),i=d({name:"",location:""}),p=d(!1),s=d({id:null,name:"",location:""}),o=I(),u=d([]);async function c(a={},t=!1){await o.fetchAll(a,t)}c({page:1,limit:5});const W=T(()=>{var a;return{total:((a=o.warehouses)==null?void 0:a.length)||0,data:o.warehouses||[]}}),k=[{key:"name",label:"Warehouse Name",sortable:!0,filterable:!0},{key:"location",label:"Location",sortable:!0,filterable:!0}],C=async a=>{await c(a,!0)},N=a=>{u.value=a},B=a=>{s.value={id:a.id,name:a.name,location:a.location},p.value=!0},S=()=>{i.value={name:"",location:""},h.value=!0};async function V(){await o.create(i.value),o.error||(h.value=!1,await c({page:1,limit:5},!0))}async function D(){await o.updateById(s.value.id,{name:s.value.name,location:s.value.location}),o.error||(p.value=!1,await c({page:1,limit:5},!0))}async function L(){if(u.value.length===0)return;if((await g.fire({title:"Are you sure?",text:"You wonâ€™t be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const t of u.value)if(await o.deleteById(t),o.error)break;o.error||(u.value=[],await c({page:1,limit:5},!0),g.fire("Deleted!","The warehouses have been deleted.","success"))}}const E=()=>{h.value=!1},M=()=>{p.value=!1};return(a,t)=>(m(),w($,null,[r(A,null,{default:f(()=>[r(F,null,{default:f(()=>[n(o).error?(m(),y(Q,{key:0,icon:n(z),color:"danger"},{default:f(()=>[U(j(n(o).error),1)]),_:1},8,["icon"])):v("",!0),r(q,{icon:n(G),title:"Warehouse",main:""},{default:f(()=>[e("div",K,[r(x,{icon:n(H),color:"primary",label:"New Warehouse",onClick:S},null,8,["icon"]),u.value.length?(m(),y(x,{key:0,icon:n(J),color:"danger",label:"Delete",onClick:L},null,8,["icon"])):v("",!0)])]),_:1},8,["icon"]),r(P,{class:"mb-6"},{default:f(()=>[r(Y,{columns:k,data:W.value,loading:n(o).isLoading,checkable:"",onQueryChange:C,onSelected:N,onEdit:B},null,8,["data","loading"])]),_:1})]),_:1})]),_:1}),h.value?(m(),w("div",O,[e("div",R,[X,e("div",Z,[ee,b(e("input",{id:"warehouseName","onUpdate:modelValue":t[0]||(t[0]=l=>i.value.name=l),type:"text",class:"w-full border p-2 rounded"},null,512),[[_,i.value.name]])]),e("div",ae,[oe,b(e("input",{id:"warehouseLocation","onUpdate:modelValue":t[1]||(t[1]=l=>i.value.location=l),type:"text",class:"w-full border p-2 rounded"},null,512),[[_,i.value.location]])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:E}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:V}," Save ")])])])):v("",!0),p.value?(m(),w("div",te,[e("div",se,[le,e("div",ne,[ie,b(e("input",{id:"editWarehouseName","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.name=l),type:"text",class:"w-full border p-2 rounded"},null,512),[[_,s.value.name]])]),e("div",re,[ue,b(e("input",{id:"editWarehouseLocation","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.location=l),type:"text",class:"w-full border p-2 rounded"},null,512),[[_,s.value.location]])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:M}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:D}," Update ")])])])):v("",!0)],64))}};export{De as default};
