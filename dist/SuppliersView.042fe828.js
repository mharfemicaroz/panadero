import{a as m,s as j,b as f,l as g,f as r,e as b,i as e,B as u,C as d,m as v,F,h as n,c as x,v as I,t as A,S}from"./index.a2c9f28c.js";import{_ as z}from"./LayoutAuthenticatedX.d58fd7d8.js";import{_ as Q}from"./SectionMain.8435c1f0.js";import{u as L}from"./supplier.a4b9a58c.js";import{_ as Y}from"./NotificationBar.caa84e93.js";import{B as q}from"./BaseTable.a063d648.js";import{_ as G}from"./CardBox.25a3dc7a.js";import{_ as H}from"./SectionTitleLineWithButton.39476921.js";import{_ as k}from"./BaseButton.b8e12a74.js";import{p as J,c as K,u as O,v as R}from"./mdi.aa269c9f.js";import"./darkMode.b88882a1.js";import"./BaseIcon.ad3a4017.js";import"./FormControl.2759acc3.js";import"./FooterBar.948c11c8.js";import"./logo.c6f18b48.js";import"./BaseLevel.e0eed931.js";import"./index.77c7a69c.js";import"./TableCheckboxCell.8ab5003b.js";import"./BaseButtons.e7208c74.js";import"./_plugin-vue_export-helper.c27b6911.js";const W={class:"flex items-center gap-2"},X={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Z={class:"bg-white p-6 rounded shadow-lg w-[500px]"},ee=e("h2",{class:"text-xl mb-4"},"Add Supplier",-1),le={class:"mb-4"},te=e("label",{class:"block mb-1"},"Name",-1),ae={class:"mb-4"},oe=e("label",{class:"block mb-1"},"Email",-1),se={class:"mb-4"},ie=e("label",{class:"block mb-1"},"Phone",-1),ne={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},re={class:"bg-white p-6 rounded shadow-lg w-[500px]"},ue=e("h2",{class:"text-xl mb-4"},"Edit Supplier",-1),de={class:"mb-4"},ce=e("label",{class:"block mb-1"},"Name",-1),pe={class:"mb-4"},me=e("label",{class:"block mb-1"},"Email",-1),fe={class:"mb-4"},be=e("label",{class:"block mb-1"},"Phone",-1),Fe={__name:"SuppliersView",setup(_e){const _=m(!1),h=m(!1),i=m({name:"",email:"",phone:""}),s=m({id:null,name:"",email:"",phone:""}),t=L(),c=m([]);async function p(a={},l=!1){await t.fetchItems(a,l)}p({page:1,limit:10});const C=j(()=>{var a,l,o,y,w;return{total:((a=t.items)==null?void 0:a.total)||0,totalPages:((l=t.items)==null?void 0:l.totalPages)||1,currentPage:((o=t.items)==null?void 0:o.currentPage)||1,pageSize:((y=t.items)==null?void 0:y.pageSize)||10,data:((w=t.items)==null?void 0:w.data)||[]}}),B=[{key:"name",label:"Name",sortable:!0,filterable:!0},{key:"email",label:"Email",sortable:!0,filterable:!0},{key:"phone",label:"Phone",sortable:!0,filterable:!0}],N=async a=>{await p(a,!0)},V=a=>{c.value=a},E=async a=>{s.value={id:a.id,name:a.name,email:a.email,phone:a.phone},h.value=!0},D=()=>{i.value={name:"",email:"",phone:""},_.value=!0};async function P(){await t.createItem(i.value),t.error||(_.value=!1,await p({page:1,limit:10},!0))}async function T(){await t.updateItem(s.value.id,s.value),t.error||(h.value=!1,await p({page:1,limit:10},!0))}async function U(){if(c.value.length===0)return;if((await S.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const l of c.value)if(await t.deleteItem(l.id),t.error)break;t.error||(c.value=[],await p({page:1,limit:10},!0),S.fire("Deleted!","The suppliers have been deleted.","success"))}}const M=()=>{_.value=!1},$=()=>{h.value=!1};return(a,l)=>(f(),g(F,null,[r(z,null,{default:b(()=>[r(Q,null,{default:b(()=>[n(t).error?(f(),x(Y,{key:0,icon:n(J),color:"danger"},{default:b(()=>[I(A(n(t).error),1)]),_:1},8,["icon"])):v("",!0),r(H,{icon:n(K),title:"Suppliers",main:""},{default:b(()=>[e("div",W,[r(k,{icon:n(O),color:"primary",label:"New Supplier",onClick:D},null,8,["icon"]),c.value.length?(f(),x(k,{key:0,icon:n(R),color:"danger",label:"Delete",onClick:U},null,8,["icon"])):v("",!0)])]),_:1},8,["icon"]),r(G,{class:"mb-6"},{default:b(()=>[r(q,{columns:B,data:C.value,loading:n(t).isLoading,checkable:"",onQueryChange:N,onSelected:V,onEdit:E},null,8,["data","loading"])]),_:1})]),_:1})]),_:1}),_.value?(f(),g("div",X,[e("div",Z,[ee,e("div",le,[te,u(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>i.value.name=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[d,i.value.name]])]),e("div",ae,[oe,u(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>i.value.email=o),type:"email",class:"w-full border p-2 rounded"},null,512),[[d,i.value.email]])]),e("div",se,[ie,u(e("input",{"onUpdate:modelValue":l[2]||(l[2]=o=>i.value.phone=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[d,i.value.phone]])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:M},"Cancel"),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:P}," Save ")])])])):v("",!0),h.value?(f(),g("div",ne,[e("div",re,[ue,e("div",de,[ce,u(e("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.name=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[d,s.value.name]])]),e("div",pe,[me,u(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>s.value.email=o),type:"email",class:"w-full border p-2 rounded"},null,512),[[d,s.value.email]])]),e("div",fe,[be,u(e("input",{"onUpdate:modelValue":l[5]||(l[5]=o=>s.value.phone=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[d,s.value.phone]])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:$}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:T}," Update ")])])])):v("",!0)],64))}};export{Fe as default};
