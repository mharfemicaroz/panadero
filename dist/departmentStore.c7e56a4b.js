import{J as o,K as m,a as d}from"./index.a2c9f28c.js";import{A as u}from"./index.0363223d.js";const p={async create(e){return(await o.post(`${u}/departments`,e)).data},async getById(e){return(await o.get(`${u}/departments/${e}`)).data},async updateById(e,t){return(await o.put(`${u}/departments/${e}`,t)).data},async delete(e){return(await o.delete(`${u}/departments/${e}`)).data},async list(e){return(await o.get(`${u}/departments`,{params:e})).data}},$=m("department",()=>{const e=d({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),t=d(!1),n=d(null),c=d(!1);return{items:e,isLoading:t,error:n,isLoaded:c,fetchItems:async(l={},r=!1)=>{var a;if(n.value=null,!(!r&&c.value))try{t.value=!0;const s=await p.list(l);Object.assign(e.value,{total:s.total||0,totalPages:s.totalPages||1,currentPage:l.page||1,pageSize:l.limit||10,data:s.data||[]}),c.value=!0}catch(s){n.value=((a=s==null?void 0:s.response)==null?void 0:a.message)||"Failed to fetch departments"}finally{t.value=!1}},createItem:async l=>{var r;n.value=null;try{t.value=!0;const a=await p.create(l);e.value.data.push(a),e.value.total+=1}catch(a){n.value=((r=a==null?void 0:a.response)==null?void 0:r.message)||"Failed to create department"}finally{t.value=!1}},updateItem:async(l,r)=>{var a;n.value=null;try{t.value=!0;const s=await p.updateById(l,r),i=e.value.data.findIndex(v=>v.id===l);i!==-1&&(e.value.data[i]=s)}catch(s){n.value=((a=s==null?void 0:s.response)==null?void 0:a.message)||"Failed to update department"}finally{t.value=!1}},deleteItem:async l=>{var r;n.value=null;try{t.value=!0,await p.delete(l),e.value.data=e.value.data.filter(a=>a.id!==l),e.value.total-=1}catch(a){n.value=((r=a==null?void 0:a.response)==null?void 0:r.message)||"Failed to delete department"}finally{t.value=!1}},resetStore:()=>{e.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},c.value=!1,t.value=!1,n.value=null}}});export{$ as u};
