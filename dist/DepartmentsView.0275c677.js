import{a as c,s as U,b as m,c as h,e as u,f as p,h as n,v as j,t as A,m as _,i as e,l as y,B as v,C as g,S as D}from"./index.a2c9f28c.js";import{_ as z}from"./LayoutAuthenticatedX.d58fd7d8.js";import{_ as F}from"./SectionMain.8435c1f0.js";import{u as Q}from"./departmentStore.c7e56a4b.js";import{_ as L}from"./NotificationBar.caa84e93.js";import{B as Y}from"./BaseTable.a063d648.js";import{_ as q}from"./CardBox.25a3dc7a.js";import{_ as G}from"./SectionTitleLineWithButton.39476921.js";import{_ as k}from"./BaseButton.b8e12a74.js";import{p as H,c as J,u as K,v as O}from"./mdi.aa269c9f.js";import"./darkMode.b88882a1.js";import"./BaseIcon.ad3a4017.js";import"./FormControl.2759acc3.js";import"./FooterBar.948c11c8.js";import"./logo.c6f18b48.js";import"./BaseLevel.e0eed931.js";import"./index.0363223d.js";import"./TableCheckboxCell.8ab5003b.js";import"./BaseButtons.e7208c74.js";import"./_plugin-vue_export-helper.c27b6911.js";const R={class:"flex items-center gap-2"},W={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},X={class:"bg-white p-6 rounded shadow-lg w-[600px]"},Z=e("h2",{class:"text-xl mb-4"},"Add Department",-1),ee={class:"grid grid-cols-1 gap-4"},te=e("label",{class:"block mb-1"},"Name",-1),ae=e("label",{class:"block mb-1"},"Description",-1),le={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},oe={class:"bg-white p-6 rounded shadow-lg w-[600px]"},se=e("h2",{class:"text-xl mb-4"},"Edit Department",-1),ne={class:"grid grid-cols-1 gap-4"},ie=e("label",{class:"block mb-1"},"Name",-1),re=e("label",{class:"block mb-1"},"Description",-1),Te={__name:"DepartmentsView",setup(de){const f=c(!1),b=c(!1),i=c({name:"",description:""}),s=c({id:null,name:"",description:""}),t=Q(),r=c([]);async function d(l={},a=!1){await t.fetchItems(l,a)}d({page:1,limit:5});const C=U(()=>{var l,a,o,w,x;return{total:((l=t.items)==null?void 0:l.total)||0,totalPages:((a=t.items)==null?void 0:a.totalPages)||1,currentPage:((o=t.items)==null?void 0:o.currentPage)||1,pageSize:((w=t.items)==null?void 0:w.pageSize)||5,data:((x=t.items)==null?void 0:x.data)||[]}}),B=[{key:"name",label:"Name",sortable:!0,filterable:!0},{key:"description",label:"Description",sortable:!0,filterable:!0}],N=async l=>{await d(l,!0)},S=l=>{r.value=l},V=l=>{s.value={id:l.id,name:l.name,description:l.description},b.value=!0},T=()=>{i.value={name:"",description:""},f.value=!0};async function E(){await t.createItem(i.value),t.error||(f.value=!1,await d({page:1,limit:5},!0))}async function M(){await t.updateItem(s.value.id,s.value),t.error||(b.value=!1,await d({page:1,limit:5},!0))}async function $(){if(r.value.length===0)return;if((await D.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const a of r.value)if(await t.deleteItem(a),t.error)break;t.error||(r.value=[],await d({page:1,limit:5},!0),D.fire("Deleted!","The departments have been deleted.","success"))}}const I=()=>{f.value=!1},P=()=>{b.value=!1};return(l,a)=>(m(),h(z,null,{default:u(()=>[p(F,null,{default:u(()=>[n(t).error?(m(),h(L,{key:0,icon:n(H),color:"danger"},{default:u(()=>[j(A(n(t).error),1)]),_:1},8,["icon"])):_("",!0),p(G,{icon:n(J),title:"Departments",main:""},{default:u(()=>[e("div",R,[p(k,{icon:n(K),color:"primary",label:"New Department",onClick:T},null,8,["icon"]),r.value.length?(m(),h(k,{key:0,icon:n(O),color:"danger",label:"Delete",onClick:$},null,8,["icon"])):_("",!0)])]),_:1},8,["icon"]),p(q,{class:"mb-6"},{default:u(()=>[p(Y,{columns:B,data:C.value,loading:n(t).isLoading,checkable:"",onQueryChange:N,onSelected:S,onEdit:V},null,8,["data","loading"])]),_:1})]),_:1}),f.value?(m(),y("div",W,[e("div",X,[Z,e("div",ee,[e("div",null,[te,v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>i.value.name=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[g,i.value.name]])]),e("div",null,[ae,v(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=o=>i.value.description=o),class:"w-full border p-2 rounded"},null,512),[[g,i.value.description]])])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:I}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:E}," Save ")])])])):_("",!0),b.value?(m(),y("div",le,[e("div",oe,[se,e("div",ne,[e("div",null,[ie,v(e("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.name=o),type:"text",class:"w-full border p-2 rounded"},null,512),[[g,s.value.name]])]),e("div",null,[re,v(e("textarea",{"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.description=o),class:"w-full border p-2 rounded"},null,512),[[g,s.value.description]])])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:P}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:M}," Update ")])])])):_("",!0)]),_:1}))}};export{Te as default};
