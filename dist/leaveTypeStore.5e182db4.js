import{J as u,K as y,a as p}from"./index.dc23916b.js";import{A as r}from"./index.07eee4a2.js";const v={async create(e){return(await u.post(`${r}/leaves/types`,e)).data},async getById(e){return(await u.get(`${r}/leaves/types/${e}`)).data},async updateById(e,t){return(await u.put(`${r}/leaves/types/${e}`,t)).data},async delete(e){return(await u.delete(`${r}/leaves/types/${e}`)).data},async list(e){return(await u.get(`${r}/leaves/types`,{params:e})).data}},$=y("leaveType",()=>{const e=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),t=p(!1),l=p(null),c=p(!1);return{items:e,isLoading:t,error:l,isLoaded:c,fetchItems:async(n={},o=!1)=>{var a;if(l.value=null,!(!o&&c.value))try{t.value=!0;const s=await v.list(n);Object.assign(e.value,{total:s.total||0,totalPages:s.totalPages||1,currentPage:n.page||1,pageSize:n.limit||10,data:s.data||[]}),c.value=!0}catch(s){l.value=((a=s==null?void 0:s.response)==null?void 0:a.message)||"Failed to fetch leave types"}finally{t.value=!1}},createItem:async n=>{var o;l.value=null;try{t.value=!0;const a=await v.create(n);e.value.data.push(a),e.value.total+=1}catch(a){l.value=((o=a==null?void 0:a.response)==null?void 0:o.message)||"Failed to create leave type"}finally{t.value=!1}},updateItem:async(n,o)=>{var a;l.value=null;try{t.value=!0;const s=await v.updateById(n,o),d=e.value.data.findIndex(i=>i.id===n);d!==-1&&(e.value.data[d]=s)}catch(s){l.value=((a=s==null?void 0:s.response)==null?void 0:a.message)||"Failed to update leave type"}finally{t.value=!1}},deleteItem:async n=>{var o;l.value=null;try{t.value=!0,await v.delete(n),e.value.data=e.value.data.filter(a=>a.id!==n),e.value.total-=1}catch(a){l.value=((o=a==null?void 0:a.response)==null?void 0:o.message)||"Failed to delete leave type"}finally{t.value=!1}},resetStore:()=>{e.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},c.value=!1,t.value=!1,l.value=null}}});export{$ as u};
