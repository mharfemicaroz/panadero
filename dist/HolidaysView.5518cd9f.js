import{d as k,a as o,aa as $,q as C,w as H,o as B,b as l,c as v,e as c,f as d,v as F,t as p,m as g,i as e,B as N,C as P,l as f,x as V,F as D}from"./index.81ed66ed.js";import{_ as E}from"./LayoutAuthenticatedX.a0217d4b.js";import{_ as L}from"./SectionMain.ff7c0a76.js";import{_ as I}from"./NotificationBar.62c87214.js";import{_ as T}from"./CardBox.d4dece43.js";import{_ as U}from"./SectionTitleLineWithButton.9b4305a6.js";import{_ as Y}from"./BaseButton.4cf3599a.js";import"./mdi.aa269c9f.js";import"./darkMode.4d354904.js";import"./BaseIcon.f7bbc3f6.js";import"./FormControl.7fdae42f.js";import"./FooterBar.223d3b14.js";import"./logo.c6f18b48.js";import"./BaseLevel.f8579f88.js";import"./_plugin-vue_export-helper.c27b6911.js";const j={class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded shadow-sm"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q=e("label",{class:"block text-sm font-medium text-gray-700"},"Year",-1),A={class:"mt-4 flex justify-end"},R={class:"min-w-full divide-y divide-gray-200"},S=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Holiday ")])],-1),z={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap"},J={class:"px-6 py-4 whitespace-nowrap"},K={key:0,class:"p-4 text-center text-gray-500"},ue={__name:"HolidaysView",setup(O){const h=k.useLoading(),t=o(null),_=o(null),u=o([]),r=o(!1),i=o(null),m=o(new Date().getFullYear()),{appContext:x}=$();x.config.globalProperties.API_URL;async function y(){i.value=null,r.value=!0;try{const s=`https://date.nager.at/api/v3/PublicHolidays/${m.value}/PH`,a=await fetch(s);if(!a.ok)throw new Error(`Error: ${a.status} ${a.statusText}`);u.value=await a.json()}catch(s){i.value=s.message||"Failed to fetch holidays"}finally{r.value=!1}}const b=()=>{y()};return C(()=>{y()}),H(()=>r.value,s=>{s?t.value||(t.value=h.show({container:_.value,canCancel:!1,isFullPage:!1,color:"#3b82f6",opacity:.8})):t.value&&(t.value.hide(),t.value=null)},{immediate:!0}),B(()=>{t.value&&(t.value.hide(),t.value=null)}),(s,a)=>(l(),v(E,null,{default:c(()=>[d(L,null,{default:c(()=>[i.value?(l(),v(I,{key:0,color:"danger"},{default:c(()=>[F(p(i.value),1)]),_:1})):g("",!0),d(U,{title:"Public Holidays",main:""}),e("div",j,[e("div",M,[e("div",null,[q,N(e("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=n=>m.value=n),class:"mt-1 block w-full rounded border-gray-300 shadow-sm p-2"},null,512),[[P,m.value,void 0,{number:!0}]])])]),e("div",A,[d(Y,{label:"Load Holidays",color:"blue",class:"px-4 py-2",onClick:b})])]),d(T,{class:"mb-6",ref_key:"tableContainer",ref:_},{default:c(()=>[e("table",R,[S,e("tbody",z,[(l(!0),f(D,null,V(u.value,(n,w)=>(l(),f("tr",{key:w},[e("td",G,p(n.date),1),e("td",J,p(n.localName),1)]))),128))])]),u.value.length===0&&!r.value?(l(),f("div",K," No holidays found. ")):g("",!0)]),_:1},512)]),_:1})]),_:1}))}};export{ue as default};
