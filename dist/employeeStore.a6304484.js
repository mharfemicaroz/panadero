import{J as u,K as y,a as p}from"./index.81ed66ed.js";import{A as r}from"./index.822c775f.js";const d={async create(e){return(await u.post(`${r}/employees`,e)).data},async getById(e){return(await u.get(`${r}/employees/${e}`)).data},async updateById(e,t){return(await u.put(`${r}/employees/${e}`,t)).data},async delete(e){return(await u.delete(`${r}/employees/${e}`)).data},async list(e){return(await u.get(`${r}/employees`,{params:e})).data}},$=y("employee",()=>{const e=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),t=p(!1),l=p(null),c=p(!1);return{items:e,isLoading:t,error:l,isLoaded:c,fetchItems:async(o={},n=!1)=>{var a;if(l.value=null,!(!n&&c.value))try{t.value=!0;const s=await d.list(o);Object.assign(e.value,{total:s.total||0,totalPages:s.totalPages||1,currentPage:o.page||1,pageSize:o.limit||10,data:s.data||[]}),c.value=!0}catch(s){l.value=((a=s==null?void 0:s.response)==null?void 0:a.message)||"Failed to fetch employees"}finally{t.value=!1}},createItem:async o=>{var n;l.value=null;try{t.value=!0;const a=await d.create(o);e.value.data.push(a),e.value.total+=1}catch(a){l.value=((n=a==null?void 0:a.response)==null?void 0:n.message)||"Failed to create employee"}finally{t.value=!1}},updateItem:async(o,n)=>{var a;l.value=null;try{t.value=!0;const s=await d.updateById(o,n),i=e.value.data.findIndex(v=>v.id===o);i!==-1&&(e.value.data[i]=s)}catch(s){l.value=((a=s==null?void 0:s.response)==null?void 0:a.message)||"Failed to update employee"}finally{t.value=!1}},deleteItem:async o=>{var n;l.value=null;try{t.value=!0,await d.delete(o),e.value.data=e.value.data.filter(a=>a.id!==o),e.value.total-=1}catch(a){l.value=((n=a==null?void 0:a.response)==null?void 0:n.message)||"Failed to delete employee"}finally{t.value=!1}},resetStore:()=>{e.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},c.value=!1,t.value=!1,l.value=null}}});export{$ as u};
