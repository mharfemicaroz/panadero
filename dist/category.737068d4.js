import{J as c,K as f,a as g}from"./index.dc23916b.js";import{A as u}from"./index.73022cfe.js";const i={async list(a){return(await c.get(`${u}/categories`,{params:a})).data},async showAll(a){return(await c.get(`${u}/categories/showall?warehouse_id=1`,{params:a})).data},async create(a){return(await c.post(`${u}/categories`,a)).data},async getById(a){return(await c.get(`${u}/categories/${a}`)).data},async updateById(a,r){return(await c.put(`${u}/categories/${a}`,r)).data},async delete(a){return(await c.delete(`${u}/categories/${a}`)).data},async listSubcategoriesByCategory(a,r={}){return(await c.get(`${u}/categories/${a}/subcategories`,{params:r})).data}},A=f("productCategory",()=>{const a=g({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),r=g(null),d=g([]),o=g(!1),n=g(null),p=g(!1);return{items:a,item:r,subcategories:d,isLoading:o,error:n,isLoaded:p,fetchItems:async(s={},l=!1)=>{var e;if(n.value=null,!(!l&&p.value))try{o.value=!0;const t=await i.list(s);Object.assign(a.value,{total:t.total||0,totalPages:t.totalPages||1,currentPage:s.page||1,pageSize:s.limit||10,data:t.data||[]}),p.value=!0}catch(t){n.value=((e=t==null?void 0:t.response)==null?void 0:e.message)||"Failed to fetch categories"}finally{o.value=!1}},fetchItemById:async s=>{var l;n.value=null;try{o.value=!0;const e=await i.getById(s);r.value=e}catch(e){n.value=((l=e==null?void 0:e.response)==null?void 0:l.message)||"Failed to fetch item"}finally{o.value=!1}},createItem:async s=>{var l;n.value=null;try{o.value=!0;const e=await i.create(s);a.value.data.push(e),a.value.total+=1}catch(e){n.value=((l=e==null?void 0:e.response)==null?void 0:l.message)||"Failed to create category"}finally{o.value=!1}},updateItem:async(s,l)=>{var e;n.value=null;try{o.value=!0;const t=await i.updateById(s,l),v=a.value.data.findIndex(y=>y.id===s);v!==-1&&(a.value.data[v]=t)}catch(t){n.value=((e=t==null?void 0:t.response)==null?void 0:e.message)||"Failed to update category"}finally{o.value=!1}},deleteItem:async s=>{var l;n.value=null;try{o.value=!0,await i.delete(s),a.value.data=a.value.data.filter(e=>e.id!==s),a.value.total-=1}catch(e){n.value=((l=e==null?void 0:e.response)==null?void 0:l.message)||"Failed to delete category"}finally{o.value=!1}},fetchSubcategoriesByCategory:async(s,l={})=>{var e;n.value=null;try{o.value=!0;const t=await i.listSubcategoriesByCategory(s,l);d.value=t.data||[]}catch(t){n.value=((e=t==null?void 0:t.response)==null?void 0:e.message)||"Failed to fetch subcategories"}finally{o.value=!1}},showAllItems:async(s={})=>{var l;n.value=null;try{o.value=!0;const e=await i.showAll(s);Object.assign(a.value,{total:e.total||0,totalPages:e.totalPages||1,currentPage:e.currentPage||1,pageSize:e.pageSize||10,data:e.data||[]})}catch(e){n.value=((l=e==null?void 0:e.response)==null?void 0:l.message)||"Failed to show all items"}finally{o.value=!1}},resetStore:()=>{a.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,d.value=[],o.value=!1,n.value=null,p.value=!1}}});export{A as u};
