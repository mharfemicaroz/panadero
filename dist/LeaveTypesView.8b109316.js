import{a as m,s as F,b as p,c as w,e as _,f as v,h as d,v as I,t as j,m as b,i as e,l as h,B as r,C as n,L as k,S as T}from"./index.dc23916b.js";import{_ as A}from"./LayoutAuthenticatedX.cf159376.js";import{_ as Y}from"./SectionMain.2e7343f7.js";import{u as z}from"./leaveTypeStore.5e182db4.js";import{_ as Q}from"./NotificationBar.14b0a4e0.js";import{B as q}from"./BaseTable.2f4a9c82.js";import{_ as G}from"./CardBox.562f4397.js";import{_ as H}from"./SectionTitleLineWithButton.67256f40.js";import{_ as L}from"./BaseButton.e90b5b96.js";import{p as J,c as K,u as O,v as R}from"./mdi.aa269c9f.js";import"./darkMode.d89ef188.js";import"./BaseIcon.0daa2018.js";import"./FormControl.266f15c8.js";import"./FooterBar.29a6daac.js";import"./logo.c6f18b48.js";import"./BaseLevel.03004d95.js";import"./index.07eee4a2.js";import"./TableCheckboxCell.a1c98b2b.js";import"./BaseButtons.809b34dd.js";import"./_plugin-vue_export-helper.c27b6911.js";const W={class:"flex items-center gap-2"},X={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Z={class:"bg-white p-6 rounded shadow-lg w-[600px]"},ee=e("h2",{class:"text-xl mb-4"},"Add Leave Type",-1),ae={class:"grid grid-cols-1 gap-4"},le=e("label",{class:"block mb-1"},"Name",-1),te=e("label",{class:"block mb-1"},"Description",-1),oe=e("label",{class:"block mb-1"},"Max Days",-1),se=e("label",{class:"block mb-1"},"Carry Forward Limit",-1),ie=e("label",{class:"block mb-1"},"Paid Leave",-1),re=e("option",{value:!0},"Yes",-1),ne=e("option",{value:!1},"No",-1),de=[re,ne],ue={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ce={class:"bg-white p-6 rounded shadow-lg w-[600px]"},me=e("h2",{class:"text-xl mb-4"},"Edit Leave Type",-1),pe={class:"grid grid-cols-1 gap-4"},_e=e("label",{class:"block mb-1"},"Name",-1),ve=e("label",{class:"block mb-1"},"Description",-1),fe=e("label",{class:"block mb-1"},"Max Days",-1),ye=e("label",{class:"block mb-1"},"Carry Forward Limit",-1),be=e("label",{class:"block mb-1"},"Paid Leave",-1),we=e("option",{value:!0},"Yes",-1),xe=e("option",{value:!1},"No",-1),ge=[we,xe],Qe={__name:"LeaveTypesView",setup(he){const f=m(!1),y=m(!1),i=m({name:"",description:"",max_days:0,carry_forward_limit:0,is_paid:!0}),s=m({id:null,name:"",description:"",max_days:0,carry_forward_limit:0,is_paid:!0}),o=z(),u=m([]);async function c(t={},a=!1){await o.fetchItems(t,a)}c({page:1,limit:5});const C=F(()=>{var t,a,l,x,g;return{total:((t=o.items)==null?void 0:t.total)||0,totalPages:((a=o.items)==null?void 0:a.totalPages)||1,currentPage:((l=o.items)==null?void 0:l.currentPage)||1,pageSize:((x=o.items)==null?void 0:x.pageSize)||5,data:((g=o.items)==null?void 0:g.data)||[]}}),V=[{key:"name",label:"Name",sortable:!0},{key:"description",label:"Description",sortable:!0},{key:"max_days",label:"Max Days",sortable:!0},{key:"carry_forward_limit",label:"Carry Forward Limit",sortable:!0},{key:"is_paid",label:"Paid Leave",sortable:!0}],D=async t=>{await c(t,!0)},N=t=>{u.value=t},S=t=>{s.value={id:t.id,name:t.name,description:t.description,max_days:t.max_days,carry_forward_limit:t.carry_forward_limit,is_paid:t.is_paid},y.value=!0},B=()=>{i.value={name:"",description:"",max_days:0,carry_forward_limit:0,is_paid:!0},f.value=!0};async function U(){await o.createItem(i.value),o.error||(f.value=!1,await c({page:1,limit:5},!0))}async function M(){await o.updateItem(s.value.id,s.value),o.error||(y.value=!1,await c({page:1,limit:5},!0))}async function P(){if(u.value.length===0)return;if((await T.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete them!"})).isConfirmed){for(const a of u.value)if(await o.deleteItem(a),o.error)break;o.error||(u.value=[],await c({page:1,limit:5},!0),T.fire("Deleted!","The leave types have been deleted.","success"))}}const E=()=>{f.value=!1},$=()=>{y.value=!1};return(t,a)=>(p(),w(A,null,{default:_(()=>[v(Y,null,{default:_(()=>[d(o).error?(p(),w(Q,{key:0,icon:d(J),color:"danger"},{default:_(()=>[I(j(d(o).error),1)]),_:1},8,["icon"])):b("",!0),v(H,{icon:d(K),title:"Leave Types",main:""},{default:_(()=>[e("div",W,[v(L,{icon:d(O),color:"primary",label:"New Leave Type",onClick:B},null,8,["icon"]),u.value.length?(p(),w(L,{key:0,icon:d(R),color:"danger",label:"Delete",onClick:P},null,8,["icon"])):b("",!0)])]),_:1},8,["icon"]),v(G,{class:"mb-6"},{default:_(()=>[v(q,{columns:V,data:C.value,loading:d(o).isLoading,checkable:"",onQueryChange:D,onSelected:N,onEdit:S},null,8,["data","loading"])]),_:1})]),_:1}),f.value?(p(),h("div",X,[e("div",Z,[ee,e("div",ae,[e("div",null,[le,r(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>i.value.name=l),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,i.value.name]])]),e("div",null,[te,r(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=l=>i.value.description=l),class:"w-full border p-2 rounded"},null,512),[[n,i.value.description]])]),e("div",null,[oe,r(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>i.value.max_days=l),type:"number",class:"w-full border p-2 rounded"},null,512),[[n,i.value.max_days]])]),e("div",null,[se,r(e("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>i.value.carry_forward_limit=l),type:"number",class:"w-full border p-2 rounded"},null,512),[[n,i.value.carry_forward_limit]])]),e("div",null,[ie,r(e("select",{"onUpdate:modelValue":a[4]||(a[4]=l=>i.value.is_paid=l),class:"w-full border p-2 rounded"},de,512),[[k,i.value.is_paid]])])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:E}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:U}," Save ")])])])):b("",!0),y.value?(p(),h("div",ue,[e("div",ce,[me,e("div",pe,[e("div",null,[_e,r(e("input",{"onUpdate:modelValue":a[5]||(a[5]=l=>s.value.name=l),type:"text",class:"w-full border p-2 rounded"},null,512),[[n,s.value.name]])]),e("div",null,[ve,r(e("textarea",{"onUpdate:modelValue":a[6]||(a[6]=l=>s.value.description=l),class:"w-full border p-2 rounded"},null,512),[[n,s.value.description]])]),e("div",null,[fe,r(e("input",{"onUpdate:modelValue":a[7]||(a[7]=l=>s.value.max_days=l),type:"number",class:"w-full border p-2 rounded"},null,512),[[n,s.value.max_days]])]),e("div",null,[ye,r(e("input",{"onUpdate:modelValue":a[8]||(a[8]=l=>s.value.carry_forward_limit=l),type:"number",class:"w-full border p-2 rounded"},null,512),[[n,s.value.carry_forward_limit]])]),e("div",null,[be,r(e("select",{"onUpdate:modelValue":a[9]||(a[9]=l=>s.value.is_paid=l),class:"w-full border p-2 rounded"},ge,512),[[k,s.value.is_paid]])])]),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded",onClick:$}," Cancel "),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded",onClick:M}," Update ")])])])):b("",!0)]),_:1}))}};export{Qe as default};
